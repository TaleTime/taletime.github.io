{"version":3,"sources":["../../src/providers/alert/alert.ts","../../src/pages/start/start.ts","../../src/pages/storyMenu/storyMenu.ts","../../src/pages/player/player.ts","../../src/providers/platform-bridge/platform-bridge.ts","../../src/pages/credits/credits.ts","../../src/pages/impressum/impressum.ts","../../src/app/constants.ts","../../src/pages/settings/settings.ts","../../src/pages/storyDetails/storyDetails.ts","../../src/pages/change-user-account-pin/change-user-account-pin.ts","../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/datamodels/userProfile.ts","../../src/pages/userAccount/userAccount.ts","../../src/pages/createUserAccount/createUserAccount.ts","../../src/pages/tabs/tabs.ts","../../src/pages/availableStories/availableStories.ts","../../src/providers/audio/audio.ts","../../src/providers/speechRecognition/answerMatching.ts","../../src/providers/speechRecognition/ttsText.ts","../../src/pages/createUserProfile/createUserProfile.ts","../../src/providers/common/storage.ts","../../src/providers/logger/logger.ts","../../src/providers/auth/auth.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/datamodels/settings.ts","../../src/datamodels/userAccount.ts","../../src/datamodels/storyInformation.ts","../../src/datamodels/savegame.ts","../../src/datamodels/story/story.ts","../../src/app/app.component.ts","../../src/pages/info/info.ts","../../src/providers/settings/settings.ts","../../src/providers/story/story.ts","../../src/providers/simple-toast/simple-toast.ts","../../src/providers/speechRecognition/languageFile.ts","../../src/pages/selectUserProfile/selectUserProfile.ts","../../src/providers/savegame/savegame.ts","../../src/providers/public-story-helper/public-story-helper.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport 'rxjs/add/operator/map';\r\n\r\nimport { AlertController } from 'ionic-angular';\r\nimport { AlertButton } from 'ionic-angular/components/alert/alert-options';\r\n/*\r\nGenerated class for the AlertProvider provider.\r\n\r\nSee https://angular.io/docs/ts/latest/guide/dependency-injection.html\r\nfor more info on providers and Angular 2 DI.\r\n*/\r\n@Injectable()\r\nexport class AlertProvider {\r\n\r\n\tconstructor(public alertCtrl: AlertController) { };\r\n\r\n\tcreateAlert(title : string, subTitle : string, buttons : AlertButton[], message? :string ) {\r\n\t\tlet alert = this.alertCtrl.create({\r\n\t\t\ttitle: title,\r\n\t\t\tsubTitle: subTitle,\r\n\t\t\tmessage: message,\r\n\t\t\tbuttons: buttons\r\n\t\t});\r\n\t\treturn alert;\r\n\t}\r\n\r\n\tcreateButton(text: string, handler: () => void) {\r\n\t\treturn {\r\n\t\t\ttext: text,\r\n\t\t\thandler: handler\r\n\t\t};\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/alert/alert.ts","import { Component } from \"@angular/core\";\r\nimport { NavController } from \"ionic-angular\";\r\n\r\nimport { CreateUserAccountPage } from \"../../pages/createUserAccount/createUserAccount\";\r\nimport { SelectUserProfilePage } from \"../selectUserProfile/selectUserProfile\"\r\n\r\nimport { AuthProvider } from '../../providers/auth/auth';\r\n\r\n//import { SpeechRecognition } from \"@ionic-native/speech-recognition\";\r\nimport { Platform } from \"ionic-angular/platform/platform\";\r\nimport { StorageProvider } from \"../../providers/common/storage\";\r\nimport { SimpleToastProvider } from \"../../providers/simple-toast/simple-toast\";\r\nimport { TranslateService } from \"@ngx-translate/core\";\r\nimport { PlatformBridgeProvider } from \"../../providers/platform-bridge/platform-bridge\";\r\n\r\n@Component({\r\n  selector: 'page-start',\r\n  templateUrl: 'start.html'\r\n})\r\nexport class StartPage {\r\n  // load settings provider to make sure an instance is created on startup,\r\n  // actually only necessary because settings page uses settings provider directly as datamodel\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    private storageProvider: StorageProvider,\r\n    private authProvider: AuthProvider,\r\n    //private speechRecognition: SpeechRecognition,\r\n    private platform: Platform,\r\n    private toastProvider: SimpleToastProvider,\r\n    private translate: TranslateService,\r\n    private platformBridge: PlatformBridgeProvider\r\n  ) {\r\n\r\n    this.platform.ready().then(() => {\r\n      /*this.speechRecognition.requestPermission().then(\r\n        () => {\r\n          console.log(\"Permission granted - everything OK!\");\r\n          /* To get the file permission needed for downloads, we have to check/create a file or folder \r\n          this.requestFilePermission(this.storageProvider);\r\n        }\r\n      );*/\r\n        this.requestFilePermission(this.storageProvider);\r\n\r\n    });\r\n  }\r\n  \r\n\r\n  private requestFilePermission(storage: StorageProvider) {\r\n    storage.createAppDirOnExtRoot().then(() => {\r\n      this.signIn();\r\n    }).catch(() => {\r\n      this.translate.get('PERMISSION_FILE_NEEDED').subscribe((msg) => {\r\n        this.toastProvider.displayToast(msg, null, true, () => {\r\n          //this.requestFilePermission(storage);\r\n        });\r\n      })\r\n    });\r\n    if (this.platformBridge.platformIsBrowser()) {\r\n      this.authProvider.addTestUser();\r\n      this.authProvider.login({ name: \"Test\", email: \"test@mail.com\", pin: \"1234\"}).subscribe(allowed => {\r\n      if (allowed) {\r\n        this.navCtrl.setRoot(SelectUserProfilePage);\r\n      }\r\n    });\r\n      this.signIn();\r\n    }\r\n  }\r\n\r\n  private signIn() {\r\n    let self = this;\r\n\r\n    this.authProvider.getUserAccount(function(userAccount) {\r\n      if (userAccount) {\r\n        self.authProvider.login(userAccount).subscribe(allowed => {\r\n          if (allowed) {\r\n            self.navCtrl.setRoot(SelectUserProfilePage);\r\n          }\r\n        });\r\n\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  goToCreateAccount() {\r\n    this.navCtrl.push(CreateUserAccountPage);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/start/start.ts","import { Component } from \"@angular/core\";\r\nimport { MenuController, NavController, Platform } from \"ionic-angular\";\r\nimport { Reader, StoryInformation } from \"../../datamodels/storyInformation\";\r\nimport { SelectUserProfilePage } from \"../selectUserProfile/selectUserProfile\";\r\nimport { AuthProvider } from '../../providers/auth/auth';\r\nimport { StoryDetailsPage } from \"../storyDetails/storyDetails\";\r\nimport { StoryProvider } from \"../../providers/story/story\";\r\nimport { PlayerPage } from \"../player/player\";\r\nimport { App } from \"ionic-angular/components/app/app\";\r\n\r\n@Component({\r\n  selector: 'page-storyMenu',\r\n  templateUrl: 'storyMenu.html'\r\n})\r\nexport class StoryMenuPage {\r\n  activeUserProfileName: string;\r\n  activeUserProfileAvatarName: string;\r\n\r\n  constructor(public platform: Platform, public app: App, public navCtrl: NavController, public menuCtrl: MenuController, private authProvider: AuthProvider, public storyProvider: StoryProvider) {\r\n    const activeUserProfile = this.authProvider.getActiveUserProfile();\r\n    if (activeUserProfile) {\r\n      this.activeUserProfileName = activeUserProfile.name;\r\n      this.activeUserProfileAvatarName = activeUserProfile.avatar.name;\r\n    }\r\n  }\r\n\r\n\r\n  public get stories(): Array<StoryInformation> {\r\n    return this.storyProvider.stories;\r\n  }\r\n\r\n  goToSelectUserProfilePage() {\r\n    this.navCtrl.push(SelectUserProfilePage);\r\n  }\r\n\r\n  showDetails(story: StoryInformation) {\r\n    this.navCtrl.push(StoryDetailsPage, {\r\n      selectedStory: story\r\n    });\r\n  }\r\n\r\n  deleteStory(story: StoryInformation) {\r\n    this.storyProvider.deleteStory(story.id);\r\n  }\r\n\r\n  goToPlayerPage(storyId: string) {\r\n    this.navCtrl.push(PlayerPage,\r\n      {\r\n        storyId: storyId,\r\n        mode: \"continue\"\r\n      });\r\n  }\r\n\r\n  goToAvailableStories() {\r\n    this.navCtrl.parent.select(1);\r\n  }\r\n\r\n  getSubtitle(r: Reader) {\r\n    return ' ' + r.name;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/storyMenu/storyMenu.ts","import { ApplicationRef, Component, OnDestroy } from \"@angular/core\";\r\nimport { NavController, NavParams, Platform } from \"ionic-angular\";\r\n\r\n//Provider\r\nimport { StoryProvider } from \"../../providers/story/story\";\r\nimport { AudioProvider } from \"../../providers/audio/audio\";\r\nimport { AnswerMatchingProvider } from \"../../providers/speechRecognition/answerMatching\";\r\nimport { SettingsProvider } from \"../../providers/settings/settings\";\r\nimport { TtsTextProvider } from \"../../providers/speechRecognition/ttsText\";\r\n\r\n//Plugins\r\nimport { SpeechRecognition } from \"@ionic-native/speech-recognition\";\r\nimport { TextToSpeech } from \"@ionic-native/text-to-speech\";\r\n\r\n//Datamodels & Constants\r\nimport { ChapterAttributes, MtgaNextStoryNode, StoryMetaData } from \"../../datamodels/story/story\";\r\nimport {\r\n\tANSWER_CHAPTER_BACKWARDS,\r\n\tANSWER_CHAPTER_REPEAT,\r\n\tCSS_PULSE_CLASS,\r\n\tDEFAULT_READER,\r\n\tFILETYPE_MP4,\r\n\tREADER_DIR,\r\n\tSTORY_DIR\r\n} from \"../../app/constants\";\r\nimport { Savegame } from \"../../datamodels/savegame\";\r\n\r\nimport { StoryMenuPage } from \"../storyMenu/storyMenu\";\r\nimport { SaveGameProvider } from \"../../providers/savegame/savegame\";\r\nimport { PublicStoryHelperProvider } from \"../../providers/public-story-helper/public-story-helper\";\r\nimport { PlatformBridgeProvider } from \"../../providers/platform-bridge/platform-bridge\";\r\n\r\n//import Stack from \"ts-data.stack\";\r\n/**\r\n * @author Janis Schacht\r\n * @author Kevin Münch\r\n * @author Markus Altmeyer\r\n * player.ts contains the logic that is necessary to play stories\r\n */\r\n\r\n\r\nconst BEGIN = \"begin\";\r\nconst CONTINUE = \"continue\";\r\nconst FIRST_NODE = 1;\r\n\r\n@Component({\r\n\tselector: 'page-player',\r\n\ttemplateUrl: 'player.html',\r\n})\r\nexport class PlayerPage implements OnDestroy {\r\n\r\n\tprivate playing: boolean = false;\r\n\tprivate selectedReader: string;\r\n\r\n\t//True, if reader is DEFAULT_READER. Use tts and don't try to load audio file\r\n\tprivate usingTTS: boolean;\r\n\t//if an audio file is not available, audio changes to tts for this audiofile\r\n\tprivate temporaryTTS: boolean = false;\r\n\r\n\tprivate metadata: StoryMetaData = new StoryMetaData();\r\n\tprivate answers: MtgaNextStoryNode[];\r\n\tprivate text: string;\r\n\tprivate attr: ChapterAttributes;\r\n\tprivate storyId: string;\r\n\tprivate mode: string;\r\n\tprivate savegame: Savegame;\r\n\tprivate pulseClass: string;\r\n\tprivate stopped: boolean;\r\n\r\n\t//While tts is reading answers out or while speechrecognition is listening, block playPause-Button\r\n\tprivate isPlayPauseBlocked: boolean = false;\r\n\r\n\tconstructor(public navCtrl: NavController,\r\n\t\tpublic navParams: NavParams,\r\n\t\tprivate savegameProvider: SaveGameProvider,\r\n\t\tprivate audioProvider: AudioProvider,\r\n\t\tprivate platform: Platform,\r\n\t\tprivate story: StoryProvider,\r\n\t\tprivate appRef: ApplicationRef,\r\n\t\tprivate speechRecognition: SpeechRecognition,\r\n\t\tprivate ttsTexts: TtsTextProvider,\r\n\t\tprivate tts: TextToSpeech,\r\n\t\tprivate matching: AnswerMatchingProvider,\r\n\t\tprivate settings: SettingsProvider,\r\n\t\tprivate publicStoryHelper: PublicStoryHelperProvider,\r\n\t\tprivate platformBridge : PlatformBridgeProvider) {\r\n\r\n\t\tthis.platform.ready().then(\r\n\t\t\t() => {\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(\"PlayerPage started\")\r\n\t\t\t\tthis.storyId = this.navParams.get(\"storyId\");\r\n\t\t\t\tconsole.log(\"storyid:\",this.storyId)\r\n\r\n\t\t\t\tthis.loadSavegame()\r\n\r\n\t\t\t\t//DEFAULT_READER if new savegame\r\n\t\t\t\tthis.selectedReader = this.savegame.reader;\r\n\t\t\t\tthis.mode = this.navParams.get(\"mode\"); // differentiate between starting story over or continuing from savegame\r\n\t\t\t\tconsole.log(\"storyId:\" + this.storyId);\r\n\t\t\t\tconsole.log(\"reader:\" + this.selectedReader);\r\n\t\t\t\tconsole.log(\"mode: \" + this.mode);\r\n\t\t\t\tthis.attr = new ChapterAttributes();\r\n\t\t\t\t// this.savegame = new Savegame();\r\n\r\n\t\t\t\tif (this.selectedReader === DEFAULT_READER) {\r\n\t\t\t\t\tthis.usingTTS = true;\r\n\t\t\t\t\tconsole.log(\"using tts\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.usingTTS = false;\r\n\t\t\t\t}\r\n\t\t\t\tif (settings.speechRecognition && !this.platformBridge.platformIsBrowser()) {\r\n\t\t\t\t\tthis.speechRecognition.requestPermission()\r\n\t\t\t\t\t\t.then(() => settings.speechRecognition = true)\r\n\t\t\t\t\t\t.catch(() => settings.speechRecognition = false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.loadStory(this.storyId);\r\n\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\tionViewWillLeave() {\r\n\t\t//This is triggered when another screen is loaded\r\n\t\tconsole.log(\"Player leaved, stop audio\")\r\n\t\tthis.pause();\r\n\t\t\r\n\t\tif(!this.platformBridge.platformIsBrowser()){\r\n\t\t\t//If speechRecogniton is listening, stop it\r\n\t\t\tthis.speechRecognition.stopListening();\r\n\t\t\t//If tts is reading answers out, stop it\r\n\t\t\tthis.tts.speak(\" \");\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tngOnDestroy(): void {\r\n\t\tconsole.log(\"Destroy Player\")\r\n\t\tthis.audioProvider.stop();\r\n\r\n\t}\r\n\r\n\tonBackKeyDown() {\r\n\t\tthis.navCtrl.push(StoryMenuPage, {});\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Toggles play / pause\r\n\t */\r\n\tpublic playPause() {\r\n\t\tconsole.log('Click on Play/Pause');\r\n\t\tif(this.isPlayPauseBlocked){\r\n\t\t\tconsole.log(\"playPause ist blocked, do not play\")\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (this.playing == false) {\r\n\t\t\tconsole.log(\"Audio is not running, start it\")\r\n\t\t\tthis.play();\r\n\t\t} else {\r\n\t\t\tconsole.log(\"Audio is currently running, pause it now\")\r\n\t\t\tthis.pause();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Loads the next chapter\r\n\t * @param answer id of the answer\r\n\t */\r\n\tnextChapter(answer: number) {\r\n\t\tif (this.answers[0].attributes.id === \"-1\") {\r\n\t\t\tthis.navCtrl.setRoot(StoryMenuPage, {}, { animate: true, direction: 'backward' });\r\n\t\t} else {\r\n\t\t\tthis.loadNodeFromAnswer(answer);\r\n\t\t\tthis.updateSavegame();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t *  switches current node to previous node\r\n\t */\r\n\tpreviousChapter() {\r\n\t\tconsole.log(\"----------click on Back---------------\");\r\n\t\tconsole.log(\"Current Node: \" + this.attr.storyNodeId);\r\n\t\tlet peekObject = this.savegame.chosenPath[this.savegame.chosenPath.length - 1];\r\n\t\tif (peekObject != 1) {\r\n\t\t\tthis.pause().then(()=>{\r\n\t\t\t\tthis.savegame.chosenPath.length = this.savegame.chosenPath.length - 1;\r\n\t\t\t\tthis.loadNode();\r\n\t\t\t\tthis.updateSavegame();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tconsole.log(\"Already at first node\");\r\n\t\t\t//maybe add an alert to indicate it\r\n\t\t}\r\n\t\tconsole.log(\"-------------------------------------------\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Get the full path for an audiofile, either on internal storage or sd card\r\n\t * @param audioSrc Name of audiofile\r\n\t */\r\n\tgetAudioPath(audioSrc: string): string{\r\n\t\tlet story = this.story.getStoryInformation(this.storyId);\r\n\t\tlet audioPath = '';\r\n\t\tif (story.medium === 'cloud') {\r\n\t\t\taudioPath = this.publicStoryHelper.getAudioPathForStory(story, audioSrc, this.selectedReader);\r\n\t\t} else {\r\n\t\t\taudioPath = this.platformBridge.getAppDirectory();\r\n\t\t\taudioPath += STORY_DIR + this.storyId + '/' + this.settings.getShortLangCode() + READER_DIR + this.selectedReader + '/' + audioSrc + FILETYPE_MP4;\r\n\t\t}\r\n\t\treturn audioPath;\r\n\t}\r\n\r\n\t/**\r\n\t * Starts playing the audio output\r\n\t * depends on whether tts or real audio file is used\r\n\t */\r\n\tprivate play(): Promise<any> {\r\n\t\treturn new Promise(resolve =>{\r\n\t\t\tthis.stopped = false;\r\n\t\t\tif (this.usingTTS || this.temporaryTTS) {\r\n\t\t\t\tif( !this.platformBridge.platformIsBrowser()){\r\n\t\t\t\t\tconsole.log(\"Playing the following text: \" + this.text);\r\n\t\t\t\t\tthis.tts.speak({ text: this.text, locale: this.settings.language, rate: this.settings.ttsRate }).then(\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tthis.playing = false;\r\n\t\t\t\t\t\t\tthis.temporaryTTS = false;\r\n\t\t\t\t\t\t\tthis.readAnswersOut(0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t).catch((error) =>{\r\n\t\t\t\t\t\t//TODO: Hier wurde ein error 'UNKNOW_ERROR' geworfen, manchmal ging es manchmal nicht\r\n\t\t\t\t\t\t//Bei Geschichte der verlorene Ball -> Knoten id  3\r\n\t\t\t\t\t\tconsole.log(\"TTS error, play()\",JSON.stringify(error))\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.playing = true;\r\n\t\t\t\t\tthis.appRef.tick();\r\n\t\t\t\t}\r\n\t\t\t\tresolve();\r\n\t\t\t} else {\r\n\t\t\t\tthis.audioProvider.play().then(()=>{\r\n\t\t\t\t\tthis.playing = true;\r\n\t\t\t\t\tthis.appRef.tick();\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * pauses the audio output\r\n\t */\r\n\tprivate pause() {\r\n\t\tconsole.log(\"Pressed pause\");\r\n\t\treturn new Promise(resolve =>{\r\n\t\t\tif (this.usingTTS || this.temporaryTTS) {\r\n\t\t\t\tif( !this.platformBridge.platformIsBrowser()){\r\n\t\t\t\t\t//text has to be whitespace to work correct for some tts versions, not empty string\r\n\t\t\t\t\tthis.tts.speak(\" \").then(\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tconsole.log(\"Stop successful \");\r\n\t\t\t\t\t\t\tthis.playing = false;\r\n\t\t\t\t\t\t\tthis.stopped = true;\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t(e) => {\r\n\t\t\t\t\t\t\tconsole.log(\"TTS error, pause()\",JSON.stringify(e))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.audioProvider.pause().then(()=>{\r\n\t\t\t\t\tthis.playing = false;\r\n\t\t\t\t\tthis.stopped = true;\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * Tells the story provider to load a story.\r\n\t * Calls  @method loadSavegame to load savegame for active user\r\n\t * @param name of the story\r\n\t */\r\n\tprivate loadStory(name: string) {\r\n\t\tthis.story.loadStory(name).subscribe(\r\n\t\t\t() => {\r\n\t\t\t\tthis.metadata = this.story.getStoryAttributes();\r\n\t\t\t\t// this.loadSavegame();\r\n\t\t\t\tif (this.mode === BEGIN) {\r\n\t\t\t\t\tconsole.log(\"Start story from beginning, delete old progress\")\r\n\t\t\t\t\t//this.savegame.chosenPath = new Stack<number>();\r\n\t\t\t\t\tthis.savegame.chosenPath = [];\r\n\t\t\t\t\tthis.savegame.chosenPath.push(FIRST_NODE);\r\n\t\t\t\t} else if (this.mode === CONTINUE) {\r\n\t\t\t\t}\r\n\t\t\t\tthis.loadNode();\r\n\t\t\t\tconsole.log(\"Story loaded\");\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * loads savegame for active user\r\n\t * if no savegame exists for that user a new one will be created\r\n\t */\r\n\tprivate loadSavegame() {\r\n\t\tthis.savegame = this.savegameProvider.loadSavegame(this.storyId);\r\n\t\tconsole.log(\"Current savegame:\")\r\n\t\tconsole.log(JSON.stringify(this.savegame))\r\n\t\t//Check if Savegame exists or if a new one has to be created\r\n\t\tconsole.log(\"Savegame geladen ? \" + this.savegame.storyId);\r\n\t\tif (this.savegame.chosenPath.length === 0) {\r\n\t\t\tconsole.log(\"No existing Savegame!\");\r\n\t\t\tconsole.log(\"Creating a new on!\");\r\n\t\t\tthis.createNewSavegame();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate createNewSavegame() {\r\n\t\tthis.savegame.storyId = this.storyId;\r\n\t\tthis.savegame.chosenPath.push(FIRST_NODE);\r\n\t\tthis.savegameProvider.addSavegame(this.savegame)\r\n\t}\r\n\r\n\t/**\r\n\t * Updates Savegame, so that Users progress in Story is written to the Users File\r\n\t */\r\n\tprivate updateSavegame() {\r\n\t\tthis.savegameProvider.updateSavegame(this.savegame);\r\n\t\tconsole.log(\"Savegame successfully updated!\");\r\n\t\tconsole.log(JSON.stringify(this.savegame))\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the fields from the story provider\r\n\t * @param indicator indicates if user move back or forward in the story,\r\n\t * or if story was just loaded\r\n\t */\r\n\tprivate updateFields() {\r\n\t\tthis.answers = this.story.getAnswers();\r\n\t\tthis.checkAnswers();\r\n\t\tthis.text = this.story.getText();\r\n\t\tthis.attr = this.story.getChapterAtrributes();\r\n\t}\r\n\r\n\t/**\r\n\t * check if there are answers for current node\r\n\t * if not, create an artificial one that will lead back to the story menu page\r\n\t */\r\n\tprivate checkAnswers() {\r\n\t\tif (this.answers[0].value == null) {\r\n\t\t\tthis.answers[0].attributes.id = \"-1\";\r\n\t\t\tthis.answers[0].value = \"Back to the menu\";\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * loads Node which is in top of the savegame stack\r\n\t * necessary for backwards navigation and loading from Savegame\r\n\t * calls @method loadAudioForNode which loads the audio for the loaded node\r\n\t */\r\n\tprivate loadNode() {\r\n\t\t// console.log(\"chosenPath[]: \" + this.savegame.chosenPath.peek());\r\n\t\t// this.story.loadNode(this.savegame.chosenPath.peek() - 1);\r\n\t\tlet peekObject = this.savegame.chosenPath[this.savegame.chosenPath.length - 1];\r\n\t\tconsole.log(\"chosenPath[]: \" + peekObject);\r\n\t\tthis.story.loadNode(peekObject - 1);\r\n\r\n\t\tthis.updateFields();\r\n\t\tthis.stopped = false;\r\n\t\tthis.appRef.tick();\r\n\r\n\t\t//Check if tts or audio is used\r\n\t\tif(!this.usingTTS){\r\n\t\t\tthis.setupAudioForNode();\r\n\t\t}\r\n\t\tif (this.settings.autoPlay) {\r\n\t\t\tthis.play();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Set up the audio for the current Node\r\n\t */\r\n\tprivate setupAudioForNode(){\r\n\t\tconsole.log(\"setupAudioForNode:\")\r\n\r\n\t\t//Change back to audio if there was temporary tts\r\n\t\tthis.temporaryTTS = false;\r\n\r\n\t\tlet nodeAudioFileName = this.story.getCurrentAudioSrc();\r\n\t\tlet audioPath = this.getAudioPath(nodeAudioFileName);\r\n\t\tconsole.log(\"Audio-Path:\",audioPath)\r\n\t\tthis.audioProvider.loadAudio(audioPath,() =>{\r\n\t\t\tconsole.log(\"Audio finished\")\r\n\t\t\tthis.playing = false;\r\n\t\t\t//Angular does not detect the change\r\n\t\t\tthis.appRef.tick();\r\n\t\t\tthis.readAnswersOut(0)\r\n\t\t},(error) =>{\r\n\t\t\tconsole.log(\"Audio player Error:\")\r\n\t\t\tconsole.log(JSON.stringify(error))\r\n\t\t\tconsole.log(\"Audiofile nicht verfügbar, verwende tts\")\r\n\t\t\t// this.usingTTS = true;\r\n\t\t\tthis.temporaryTTS = true;\r\n\t\t\tif (this.settings.autoPlay) {\r\n\t\t\t\tthis.play();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * Starts reading the answers out\r\n\t * @param counter how often was it read out\r\n\t */\r\n\tprivate readAnswersOut(counter: number = 0) {\r\n\t\tconsole.log(\"readAnswersOut\")\r\n\t\tif (!this.stopped) {\r\n\t\t\t// if paused then the answers do not need to be read out\r\n\t\t\t// TODO we can use pre recorded audio files here as well to read out custom questions\r\n\r\n\t\t\t// only read answers out if this is not part of the audio file\r\n\t\t\tif (!this.usingTTS && !this.temporaryTTS && this.story.isCurrentSpeakerReadingAnswersOut()) {\r\n\t\t\t\tif (this.settings.speechRecognition) {\r\n\t\t\t\t\tthis.isPlayPauseBlocked = true;\r\n\t\t\t\t\tthis.startSpeechRecognition(counter);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// check if it is the last node\r\n\t\t\t\tif (this.answers[0].attributes.id != \"-1\") {\r\n\t\t\t\t\tlet readAnswer = this.ttsTexts.createAnswersText(this.answers);\r\n\t\t\t\t\tif(!this.platformBridge.platformIsBrowser()){\r\n\t\t\t\t\t\tthis.isPlayPauseBlocked = true;\r\n\t\t\t\t\t\tthis.tts.speak({ text: readAnswer, locale: this.settings.language, rate: this.settings.ttsRate }).then(\r\n\t\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (this.settings.speechRecognition) {\r\n\t\t\t\t\t\t\t\t\tthis.startSpeechRecognition(counter);\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tthis.isPlayPauseBlocked = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t).catch((error)=>{\r\n\t\t\t\t\t\t\tconsole.log(\"TTS error, readAnswersOut()\",JSON.stringify(error))\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Starts the speech recognition\r\n\t * @param counter how often was this already done\r\n\t */\r\n\tprivate startSpeechRecognition(counter: number) {\r\n\r\n\t\tthis.speechRecognition.isRecognitionAvailable().then(\r\n\t\t\t(available) => {\r\n\t\t\t\tif (available) {\r\n\t\t\t\t\tlet options = {\r\n\t\t\t\t\t\tlanguage: this.settings.language,\r\n\t\t\t\t\t\tshowPopup: false\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tthis.speechRecognition.startListening(options).subscribe(\r\n\t\t\t\t\t\t(matches: string[]) => {\r\n\t\t\t\t\t\t\t// the magic\r\n\t\t\t\t\t\t\tconsole.log(matches);\r\n\t\t\t\t\t\t\tlet answer = this.matching.match(matches, this.answers);\r\n\t\t\t\t\t\t\tconsole.log(\"Answer was \" + JSON.stringify(answer));\r\n\t\t\t\t\t\t\tif (answer == null) {\r\n\t\t\t\t\t\t\t\tconsole.log(\"No match! Repeating!\");\r\n\t\t\t\t\t\t\t\tthis.repeatSpeechRecognition(counter);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.isPlayPauseBlocked = false;\r\n\t\t\t\t\t\t\t\tconsole.log(\"Is answer a String?\");\r\n\t\t\t\t\t\t\t\tconsole.log(typeof answer === \"string\");\r\n\t\t\t\t\t\t\t\tif (typeof answer === \"string\") {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"Answer was a special type and is instructed to do a command\");\r\n\t\t\t\t\t\t\t\t\tswitch (answer) {\r\n\t\t\t\t\t\t\t\t\t\tcase ANSWER_CHAPTER_REPEAT:\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"Repeating chapter\");\r\n\t\t\t\t\t\t\t\t\t\t\tthis.play();\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\tcase ANSWER_CHAPTER_BACKWARDS:\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"Going to previous chapter\");\r\n\t\t\t\t\t\t\t\t\t\t\tthis.previousChapter();\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"Matched \" + answer.value + \". Going on!\");\r\n\t\t\t\t\t\t\t\t\tlet pos = this.findAnswerInList(answer);\r\n\t\t\t\t\t\t\t\t\tthis.loadNodeFromAnswer(pos);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t(err) => {\r\n\t\t\t\t\t\t\tconsole.log(\"There was an error while recording speech \" + err);\r\n\t\t\t\t\t\t\tthis.adviseUserToUseGUI();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"Speech recognition not available!\");\r\n\t\t\t\t\tthis.isPlayPauseBlocked = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Loads the next chapter from the index of an answer\r\n\t * @param pos index of the answer given by the user\r\n\t */\r\n\tprivate loadNodeFromAnswer(pos: number) {\r\n\t\tif (this.playing) {\r\n\t\t\tthis.pause().then(()=>{\r\n\t\t\t\tconsole.log(\"Paused. Loading next node for answer #\" + pos);\r\n\t\t\t\tthis.story.loadNodeForAnswer(pos);\r\n\t\t\t\tthis.updateFields();\r\n\t\t\t\tthis.savegame.chosenPath.push(Number(this.attr.storyNodeId));\r\n\t\t\t\tthis.pulseClass = '';\r\n\t\t\t\tthis.appRef.tick();\r\n\t\t\t\t//Check if tts or audio is used\r\n\t\t\t\tif(!this.usingTTS){\r\n\t\t\t\t\tthis.setupAudioForNode();\r\n\t\t\t\t}\r\n\t\t\t\tif(this.settings.autoPlay){\r\n\t\t\t\t\tthis.play();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.story.loadNodeForAnswer(pos);\r\n\t\t\tthis.updateFields();\r\n\t\t\tthis.savegame.chosenPath.push(Number(this.attr.storyNodeId));\r\n\t\t\tthis.pulseClass = '';\r\n\t\t\tthis.appRef.tick();\r\n\t\t\t//Check if tts or audio is used\r\n\t\t\tif(!this.usingTTS){\r\n\t\t\t\tthis.setupAudioForNode();\r\n\t\t\t}\r\n\t\t\tif(this.settings.autoPlay){\r\n\t\t\t\tthis.play();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Starts the speech recognition again\r\n\t * @param counter how often was speech recognition used so far\r\n\t */\r\n\tprivate repeatSpeechRecognition(counter: number) {\r\n\t\tconsole.log(\"Repeating speech recognition for the \" + counter + \" time\");\r\n\t\tif (counter < 1) {\r\n\t\t\tlet repeatText = this.ttsTexts.createRepeatText();\r\n\t\t\tthis.tts.speak({ text: repeatText, locale: this.settings.language, rate: this.settings.ttsRate }).then(\r\n\t\t\t\t() => {\r\n\t\t\t\t\tthis.startSpeechRecognition(++counter);\r\n\t\t\t\t}\r\n\t\t\t).catch((error)=>{\r\n\t\t\t\tconsole.log(\"TTS error, repeatSpeechRecognition()\",JSON.stringify(error))\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif (counter < 2) {\r\n\t\t\t\tthis.readAnswersOut(++counter);\r\n\t\t\t} else {\r\n\t\t\t\t// user should tap button\r\n\t\t\t\tthis.adviseUserToUseGUI();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * User is advised to use GUI because there was a problem with the VUI\r\n     */\r\n\tprivate adviseUserToUseGUI() {\r\n\t\tlet endText = this.ttsTexts.createAnswerHelp();\r\n\t\tthis.tts.speak({ text: endText, locale: this.settings.language, rate: this.settings.ttsRate }).then(\r\n\t\t\t() => {\r\n\t\t\t\tthis.pulseClass = CSS_PULSE_CLASS;\r\n\t\t\t\tthis.appRef.tick();\r\n\t\t\t\tthis.isPlayPauseBlocked = false;\r\n\t\t\t}\r\n\t\t).catch((error)=>{\r\n\t\t\tconsole.log(\"TTS error, adviseUserToUseGUI()\",JSON.stringify(error))\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t *    Finds the index of an answer\r\n\t * @param answer you're looking for\r\n\t * @returns {number} index\r\n\t */\r\n\tprivate findAnswerInList(answer: MtgaNextStoryNode): number {\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < this.answers.length; i++) {\r\n\t\t\tif (answer.value === this.answers[i].value) {\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn index;\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/player/player.ts","import { Injectable } from '@angular/core';\r\nimport { Platform } from 'ionic-angular/platform/platform';\r\nimport { WWW } from '../../app/constants';\r\nimport { File } from '@ionic-native/file';\r\n\r\n/*\r\n  Generated class for the PlatformBridgeProvider provider.\r\n\r\n  See https://angular.io/guide/dependency-injection for more info on providers\r\n  and Angular DI.\r\n/**\r\n * Helper class to detect the current platform the app is running on\r\n * and for handling differences between them\r\n * @export\r\n * @class PlatformBridgeProvider\r\n */\r\n@Injectable()\r\n\r\nexport class PlatformBridgeProvider {\r\n\r\n  constructor(\r\n    private platform: Platform,\r\n    private file: File\r\n  ) {}\r\n\r\n  /**\r\n   * Tells if the app runs in a browser (mobile or desktop)\r\n   */\r\n  public platformIsBrowser() : boolean {\r\n    return (this.platform.is('core') || this.platform.is('mobileweb'));\r\n  }\r\n\r\n  /**\r\n   * Tells if the app runs natively\r\n   */\r\n  public platformIsNative(): boolean {\r\n    return !this.platformIsBrowser();\r\n  }\r\n\r\n  /**\r\n   * Get the base app path where e.g. the asset folder is located\r\n   */\r\n  public getAppDirectory(): string {\r\n    if (this.platformIsBrowser()) {\r\n      //Browser needs the relative path\r\n      return '';\r\n    } else {\r\n      //Native platforms need an absolute path\r\n      return this.file.applicationDirectory + WWW + \"/\";\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/platform-bridge/platform-bridge.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\n\r\n/**\r\n * Generated class for the CreditsPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-credits',\r\n  templateUrl: 'credits.html',\r\n})\r\nexport class CreditsPage {\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams) {\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad CreditsPage');\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/credits/credits.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\n\r\n/**\r\n * Generated class for the ImpressumPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-impressum',\r\n  templateUrl: 'impressum.html',\r\n})\r\nexport class ImpressumPage {\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams) {\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad ImpressumPage');\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/impressum/impressum.ts","/**\r\n * Created by Kevin on 06.07.2017.\r\n */\r\n\r\n\r\n/** general */\r\nexport const FILETYPE_JSON = '.json';\r\nexport const FILETYPE_MP4 = '.m4a';\r\n\r\n\r\n/** directories */\r\nexport const APP_NAME = 'taletime';\r\nexport const STORY_DIR = 'assets/stories/';\r\nexport const TTS_RES = 'assets/tts/';\r\nexport const READER_DIR: string = '/readers/';\r\nexport const WWW: string = \"www\"\r\n\r\n/** file names */\r\nexport const SETTINGS_FILE_NAME = 'settings.json';\r\nexport const STORY_FILE_NAME = 'storyies.json';\r\nexport const SINGLE_STORY_FILE_NAME = 'story.json';\r\nexport const USER_FILE_NAME = 'users.json';\r\n\r\n/** for story data structure TODO names need to be defined properly */\r\nexport const MTGA_STORY = 'mtga-story';\r\nexport const MTGA_NODE = 'mtga-story-node';\r\nexport const MTGA_NEXT_NODE = 'mtga-nextStoryNode';\r\nexport const MTGA_NODE_TEXT = 'mtga-nodeText';\r\n\r\n/** for answer matching */\r\nexport const ANSWER_CHAPTER_BACKWARDS = 'chapter_back';\r\nexport const ANSWER_CHAPTER_REPEAT = 'chapter_repeat';\r\n\r\n/** TTS rates*/\r\nexport const TTS_RATE_SLOW = 'TTS_SLOW';\r\nexport const TTS_RATE_NORMAL = 'TTS_NORMAL';\r\nexport const TTS_RATE_FAST = 'TTS_FAST';\r\n\r\nexport const TTS_RATE_SLOW_VALUE = 0.5;\r\nexport const TTS_RATE_NORMAL_VALUE = 0.75;\r\nexport const TTS_RATE_FAST_VALUE = 1;\r\n\r\n\r\n/** Language */\r\nexport const AVAILABLE_LANGUAGES = [{\r\n    code: 'en-US',\r\n    name: 'English'\r\n}, {\r\n    code: 'de-DE',\r\n    name: 'Deutsch'\r\n}];\r\n\r\nexport const DEFAULT_LANG = 'en-US';\r\n\r\n/** Reader*/\r\nexport const DEFAULT_READER = 'default';\r\n\r\n/** CSS */\r\nexport const CSS_PULSE_CLASS = 'pulse';\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/constants.ts","import { Component } from \"@angular/core\";\r\nimport { IonicPage, NavController } from \"ionic-angular\";\r\nimport { TranslateService } from '@ngx-translate/core'; // added for translation 2017-11-14\r\nimport { SettingsProvider } from \"../../providers/settings/settings\";\r\nimport { AuthProvider } from '../../providers/auth/auth';\r\nimport { UserAccountPage } from \"../../pages/userAccount/userAccount\";\r\nimport { SimpleToastProvider } from \"../../providers/simple-toast/simple-toast\";\r\nimport {CreditsPage} from \"../../pages/credits/credits\";\r\nimport {ImpressumPage} from \"../../pages/impressum/impressum\";\r\n\r\nimport {\r\n  AVAILABLE_LANGUAGES,\r\n  TTS_RATE_FAST,\r\n  TTS_RATE_FAST_VALUE,\r\n  TTS_RATE_NORMAL,\r\n  TTS_RATE_NORMAL_VALUE,\r\n  TTS_RATE_SLOW,\r\n  TTS_RATE_SLOW_VALUE\r\n} from \"../../app/constants\";\r\n\r\n/**\r\n * Generated class for the Settings page.\r\n *\r\n * See http://ionicframework.com/docs/components/#navigation for more info\r\n * on Ionic pages and navigation.\r\n */\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-settings',\r\n  templateUrl: 'settings.html',\r\n})\r\nexport class SettingsPage {\r\n\r\n  languages = AVAILABLE_LANGUAGES;\r\n  ttsRates = [TTS_RATE_SLOW, TTS_RATE_NORMAL, TTS_RATE_FAST];\r\n  selectedLanguage;\r\n  ttsRate;\r\n\r\n\r\n  constructor(public navCtrl: NavController,\r\n    private settings: SettingsProvider,\r\n    private translate: TranslateService,\r\n    private authProvider: AuthProvider,\r\n    private toastProvider: SimpleToastProvider) {\r\n    this.selectedLanguage = SettingsPage.getLanguageFromCode(this.settings.language);\r\n\r\n    switch (this.settings.ttsRate) {\r\n      case TTS_RATE_SLOW_VALUE:\r\n        this.ttsRate = TTS_RATE_SLOW;\r\n        break;\r\n      case TTS_RATE_NORMAL_VALUE:\r\n        this.ttsRate = TTS_RATE_NORMAL;\r\n        break;\r\n      case TTS_RATE_FAST_VALUE:\r\n        this.ttsRate = TTS_RATE_FAST;\r\n        break;\r\n      default:\r\n        this.ttsRate = TTS_RATE_NORMAL;\r\n    }\r\n  }\r\n\r\n  changeLanguage() {\r\n    console.log('Changing language to <' + this.selectedLanguage + '>');\r\n    this.translate.use(SettingsPage.getCodeFromLanguage(this.selectedLanguage));\r\n    this.settings.language = SettingsPage.getCodeFromLanguage(this.selectedLanguage);\r\n  }\r\n\r\n  changeTtsRate() {\r\n    console.log('Changing TTS rate to <' + this.ttsRate + '>');\r\n\r\n    switch (this.ttsRate) {\r\n      case TTS_RATE_SLOW:\r\n        this.settings.ttsRate = TTS_RATE_SLOW_VALUE;\r\n        break;\r\n      case TTS_RATE_NORMAL:\r\n        this.settings.ttsRate = TTS_RATE_NORMAL_VALUE;\r\n        break;\r\n      case TTS_RATE_FAST:\r\n        this.settings.ttsRate = TTS_RATE_FAST_VALUE;\r\n        break;\r\n    }\r\n\r\n  }\r\n\r\n  public goToUserAccount(): void {\r\n    let alert = this.authProvider.presentPinPrompt(valid => {\r\n      if (valid) {\r\n        this.navCtrl.push(UserAccountPage);\r\n      } else {\r\n        this.toastProvider.displayToast(\"Wrong pin.\"); // TODO tobi i18\r\n        return false;\r\n      }\r\n    });\r\n\r\n    alert.present();\r\n  }\r\n\r\n  public goToCreditspage(): void {\r\n        this.navCtrl.push(CreditsPage);\r\n  }\r\n\r\n  public goToImpressumpage(): void {\r\n    this.navCtrl.push(ImpressumPage);\r\n}\r\n\r\n  private static getCodeFromLanguage(lang: string): string {\r\n    for (let l of AVAILABLE_LANGUAGES) {\r\n      if (l.name === lang) {\r\n        return l.code\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  private static getLanguageFromCode(code: string) {\r\n    for (let l of AVAILABLE_LANGUAGES) {\r\n      if (l.code === code) {\r\n        return l.name\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/settings/settings.ts","import { Component } from \"@angular/core\";\r\nimport { IonicPage, NavController, NavParams } from \"ionic-angular\";\r\n\r\nimport { StoryInformation } from \"../../datamodels/storyInformation\";\r\nimport { StoryProvider } from \"../../providers/story/story\";\r\n\r\nimport { PlayerPage } from \"../player/player\";\r\nimport { STORY_DIR } from \"../../app/constants\";\r\nimport { SaveGameProvider } from \"../../providers/savegame/savegame\"\r\nimport { PublicStoryHelperProvider } from \"../../providers/public-story-helper/public-story-helper\";\r\n\r\n/**\r\n * Generated class for the StoryDetailsPage page.\r\n *\r\n * See http://ionicframework.com/docs/components/#navigation for more info\r\n * on Ionic pages and navigation.\r\n */\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-storyDetails',\r\n  templateUrl: 'storyDetails.html',\r\n})\r\nexport class StoryDetailsPage {\r\n\r\n  selectedStory: StoryInformation;\r\n  selectedReader: string;\r\n  imgPath: string = 'dummy.png';\r\n\r\n  constructor(public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public storyProvider: StoryProvider,\r\n    private savegameProvider: SaveGameProvider,\r\n    private publicStoryHelper: PublicStoryHelperProvider) {\r\n    this.selectedStory = navParams.get(\"selectedStory\");\r\n    console.log(\"Show Details: \" + JSON.stringify(this.selectedStory));\r\n    \r\n    if(this.selectedStory.medium === \"cloud\"){\r\n      this.imgPath = this.publicStoryHelper.getThumbnailPathForStory(this.selectedStory);\r\n    }else{\r\n      this.imgPath = STORY_DIR + this.selectedStory.id + '/icon.png';\r\n    }\r\n    console.log(\"ImgPath:\",this.imgPath)\r\n    this.selectedReader = this.savegameProvider.loadSavegame(this.selectedStory.id).reader;\r\n  }\r\n\r\n  //Muss noch implementiert werden\r\n  saveReader() {\r\n    let sg = this.savegameProvider.loadSavegame(this.selectedStory.id);\r\n    sg.reader = this.selectedReader;\r\n    this.savegameProvider.updateSavegame(sg);\r\n  }\r\n\r\n  deleteStory(id: string) {\r\n    this.storyProvider.deleteStory(id);\r\n    //Muss noch implementiert werden\r\n    //deleteSaveGame();\r\n    this.navCtrl.pop();\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad StoryDetailsPage');\r\n  }\r\n\r\n  goToPlayerPageNew(storyId: string) {\r\n    console.log(\"StoryId: \" + storyId);\r\n    this.navCtrl.push(PlayerPage, {\r\n      storyId: storyId,\r\n      mode: \"begin\"\r\n    });\r\n  }\r\n\r\n  goToPlayerPageContinue(storyId: string) {\r\n    console.log(\"StoryId: \" + storyId);\r\n    this.navCtrl.push(PlayerPage,\r\n      {\r\n        storyId: storyId,\r\n        mode: \"continue\"\r\n      });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/storyDetails/storyDetails.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\n\r\nimport { AuthProvider } from '../../providers/auth/auth';\r\n/**\r\n * Generated class for the ChangeUserAccountPinPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-change-user-account-pin',\r\n  templateUrl: 'change-user-account-pin.html',\r\n})\r\nexport class ChangeUserAccountPinPage {\r\n  createSuccess: boolean = false;\r\n  credentials = { oldPin: '', pin: '', retypePin: '' };\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams, private authProvider: AuthProvider) {\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad ChangeUserAccountPinPage');\r\n  }\r\n\r\n  changePin() {\r\n    this.authProvider.changePin(this.credentials.oldPin, this.credentials.pin, this.credentials.retypePin).subscribe(response => {\r\n      if (response.success) {\r\n        this.navCtrl.pop();\r\n      } else {\r\n        // TODO popup with info\r\n        console.log(response.reason);\r\n      }\r\n    }, error => {\r\n      console.log(\"ChangeUserAccountPinPage-changePin(): \" + error.prototype.toString() + \":\" + JSON.stringify(error));\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/change-user-account-pin/change-user-account-pin.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 156;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 156\n// module chunks = 5","var map = {\n\t\"../pages/change-user-account-pin/change-user-account-pin.module\": [\n\t\t370,\n\t\t4\n\t],\n\t\"../pages/credits/credits.module\": [\n\t\t366,\n\t\t3\n\t],\n\t\"../pages/impressum/impressum.module\": [\n\t\t367,\n\t\t2\n\t],\n\t\"../pages/settings/settings.module\": [\n\t\t368,\n\t\t1\n\t],\n\t\"../pages/storyDetails/storyDetails.module\": [\n\t\t369,\n\t\t0\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 197;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 197\n// module chunks = 5","/**\r\n *\r\n * @author Matthias Kiefer\r\n * @date 20.11.2017\r\n */\r\nexport class UserProfile {\r\n  public id: string;\r\n  public name: string;\r\n  public avatar;\r\n  public child: boolean;\r\n  private static AVATARS = [\r\n    { id: 0, name: 'profile_standard.png', fullPath: '/www/assets/imgs/profile/profile_standard.png' },\r\n    { id: 1, name: 'profile_girl_01.png', fullPath: '/www/assets/imgs/profile/profile_girl_01.png' },\r\n    { id: 2, name: 'profile_boy_01.png', fullPath: '/www/assets/imgs/profile/profile_boy_01.png' },\r\n    { id: 3, name: 'profile_girl_02.png', fullPath: '/www/assets/imgs/profile/profile_girl_02.png' },\r\n    { id: 4, name: 'profile_boy_02.png', fullPath: '/www/assets/imgs/profile/profile_boy_02.png' }\r\n  ];\r\n\r\n  constructor(name: string, avatarId: number, child: boolean) {\r\n    this.id = Math.random().toString(36).substr(2, 9);\r\n    this.name = name;\r\n    this.avatar = UserProfile.avatars(avatarId);\r\n    this.child = child;\r\n  }\r\n\r\n  static avatars(id?) : Array<Object> | Object {\r\n    if (id !== undefined) {\r\n      return UserProfile.AVATARS[id];\r\n    } else {\r\n      return UserProfile.AVATARS;\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/datamodels/userProfile.ts","/**\r\n *\r\n * @author Matthias Kiefer\r\n * @date 2017-11-20\r\n */\r\nimport { Component } from '@angular/core';\r\nimport { App, NavController, Platform } from 'ionic-angular';\r\nimport { StartPage } from '../../pages/start/start'\r\nimport { ChangeUserAccountPinPage } from \"../../pages/change-user-account-pin/change-user-account-pin\";\r\n\r\nimport { AuthProvider } from '../../providers/auth/auth';\r\n\r\nimport { UserAccount } from '../../datamodels/userAccount';\r\n\r\n@Component({\r\n  selector: 'page-userAccount',\r\n  templateUrl: 'userAccount.html'\r\n})\r\nexport class UserAccountPage {\r\n\r\n  private userAccount: UserAccount;\r\n\r\n  constructor(private app: App, private navCtrl: NavController, private platform: Platform, private authProvider: AuthProvider) {\r\n    this.platform.ready().then(\r\n      () => {\r\n        this.userAccount = this.authProvider.currentUserAccount;\r\n      }\r\n    )\r\n  }\r\n\r\n  public changePin() {\r\n    this.navCtrl.push(ChangeUserAccountPinPage);\r\n  }\r\n\r\n  public logout() {\r\n    this.authProvider.logout().subscribe(success => {\r\n      // TODO is this pretty?\r\n      this.app.getRootNav().setRoot(StartPage);\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/userAccount/userAccount.ts","/**\r\n *\r\n * @author Matthias Kiefer\r\n * @date 2017-11-19\r\n */\r\nimport { Component } from '@angular/core';\r\nimport { NavController, AlertController, LoadingController, Loading } from 'ionic-angular';\r\n\r\nimport { SelectUserProfilePage } from '../selectUserProfile/selectUserProfile';\r\n\r\nimport { AuthProvider } from '../../providers/auth/auth';\r\n\r\n@Component({\r\n  selector: 'page-createUserAccount',\r\n  templateUrl: 'createUserAccount.html'\r\n})\r\n\r\nexport class CreateUserAccountPage {\r\n  createSuccess = false;\r\n  loading: Loading;\r\n  registerCredentials = { name: '', email: '', pin: '' };\r\n\r\n  constructor(private navCtrl: NavController, private authProvider: AuthProvider, private alertCtrl: AlertController, private loadingCtrl: LoadingController) { }\r\n\r\n  public register() {\r\n    this.showLoading();\r\n\r\n    this.authProvider.register(this.registerCredentials).subscribe(success => {\r\n      if (success) {\r\n        this.createSuccess = true;\r\n\r\n        // automatic login user\r\n        this.login();\r\n      } else {\r\n        this.showPopup(\"Error\", \"Problem creating account.\");\r\n      }\r\n    }, error => {\r\n      this.showPopup(\"Error\", error);\r\n    });\r\n  }\r\n\r\n  public login() {\r\n    this.authProvider.login(this.registerCredentials).subscribe(allowed => {\r\n      if (allowed) {\r\n        this.navCtrl.setRoot(SelectUserProfilePage);\r\n      } else {\r\n        this.showError(\"Access Denied\");\r\n      }\r\n    }, error => {\r\n      this.showError(error);\r\n    });\r\n  }\r\n\r\n  showLoading() {\r\n    this.loading = this.loadingCtrl.create({\r\n      content: 'Please wait...',\r\n      dismissOnPageChange: true\r\n    });\r\n    this.loading.present();\r\n  }\r\n\r\n  showError(text) {\r\n    this.loading.dismiss();\r\n\r\n    let alert = this.alertCtrl.create({\r\n      title: 'Fail',\r\n      subTitle: text,\r\n      buttons: ['OK']\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n  showPopup(title, text) {\r\n    let alert = this.alertCtrl.create({\r\n      title: title,\r\n      subTitle: text,\r\n      buttons: [\r\n        {\r\n          text: 'OK',\r\n          handler: data => {\r\n            if (this.createSuccess) {\r\n              this.navCtrl.popToRoot();\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/createUserAccount/createUserAccount.ts","import { Component } from '@angular/core';\r\n\r\nimport { AvailableStoriesPage } from '../availableStories/availableStories';\r\nimport { SettingsPage } from '../settings/settings';\r\nimport { StoryMenuPage } from '../storyMenu/storyMenu';\r\n\r\n@Component({\r\n  templateUrl: 'tabs.html'\r\n})\r\nexport class TabsPage {\r\n  tabs: Array<{ title: string, icon: string, component: any }>;\r\n\r\n\r\n  constructor() {\r\n    this.tabs = [\r\n      { title: 'APP_MY_STORIES', icon: 'book', component: StoryMenuPage },\r\n      { title: 'APP_NEW_STORIES', icon: 'add-circle', component: AvailableStoriesPage },\r\n      { title: 'APP_SETTINGS', icon: 'settings', component: SettingsPage }\r\n    ];\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tabs/tabs.ts","import { Component } from \"@angular/core\";\r\nimport { NavController } from \"ionic-angular\";\r\nimport { HTTP } from '@ionic-native/http';\r\nimport { StoryInformation, StoryInformationWithUrl } from \"../../datamodels/storyInformation\";\r\nimport { StoryProvider } from \"../../providers/story/story\";\r\nimport { AlertProvider } from \"../../providers/alert/alert\";\r\nimport { TranslateService } from \"@ngx-translate/core\";\r\nimport { FileTransfer, FileTransferObject } from '@ionic-native/file-transfer';\r\nimport { File } from '@ionic-native/file';\r\nimport { Zip } from \"@ionic-native/zip\";\r\nimport { Platform } from \"ionic-angular/platform/platform\";\r\nimport { LoadingController } from \"ionic-angular/components/loading/loading-controller\";\r\nimport { LoadingOptions } from \"ionic-angular/components/loading/loading-options\";\r\nimport { Loading } from \"ionic-angular/components/loading/loading\";\r\nimport { NgZone } from \"@angular/core\";\r\nimport { SimpleToastProvider } from \"../../providers/simple-toast/simple-toast\";\r\n\r\n@Component({\r\n  selector: 'page-availableStories',\r\n  templateUrl: 'availableStories.html'\r\n})\r\n\r\n/**\r\n * Die Klasse wird momentan als provisorischer Store zum testen genutzt\r\n */\r\nexport class AvailableStoriesPage {\r\n  public availableStories: Array<StoryInformationWithUrl> = new Array();\r\n  public readonly PUBLIC_STORY_URL: string = 'https://raw.githubusercontent.com/TaleTime/Stories/master/index.json';\r\n\r\n  constructor(\r\n    private zone: NgZone,\r\n    public navCtrl: NavController,\r\n    private http: HTTP,\r\n    private translate: TranslateService,\r\n    private storyProvider: StoryProvider,\r\n    private alert: AlertProvider,\r\n    private platform: Platform,\r\n    private transfer: FileTransfer,\r\n    private file: File,\r\n    private zip: Zip,\r\n    private loadingCntrl: LoadingController,\r\n    private toastProvider : SimpleToastProvider) {\r\n    this.loadDeviceDefaultStories();\r\n    this.platform.ready().then(() => {\r\n      this.loadPublicStories();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Loads the (hardcoded) default stories into the availableStories array\r\n   */\r\n  loadDeviceDefaultStories() {\r\n    let newstory = new StoryInformation();\r\n    newstory.title = \"Der verlorene Ball\";\r\n    newstory.id = \"Der_verlorene_Ball\";\r\n    newstory.author = [\"Sarah Philippi\", \"Lisa Roisch\"];\r\n    newstory.date = 2016;\r\n    newstory.cover = \"Titelbild_Der_verlorene_Ball-02.png\"\r\n    newstory.language = \"Deutsch\";\r\n    newstory.shortDescription = \"Hey, ich bin eine Beschreibung von \\\"Der verlorene Ball\\\"\";\r\n    newstory.medium = 'device';\r\n    newstory.readers = [{ name: \"Kevin\", answersPartOfAudioFile: true },\r\n    { name: \"Raoul\", answersPartOfAudioFile: false }];\r\n    this.availableStories.push(<StoryInformationWithUrl>newstory);\r\n\r\n\r\n  }\r\n\r\n  addStory(story: StoryInformation | StoryInformationWithUrl) {\r\n    console.log(\"addStory(): \" + JSON.stringify(story));\r\n    if (story.medium === 'cloud' && 'url' in story) {\r\n      // story is a public story and the URL is defined in the object\r\n      this.installPublicStory(<StoryInformationWithUrl>story);\r\n    } else if(this.storyProvider.exists(story.id)){\r\n      //story already exists\r\n      this.alertStoryAlreadyExists(story.title);\r\n    } else {\r\n      //add new (non cloud) story\r\n      this.storyProvider.addStory(story);\r\n      this.alertStoryAddedSucessfully(story.title);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Load the public stories available from the remote JSON file or an API\r\n   * specified by the PUBLIC_STORY_URL\r\n   */\r\n  public loadPublicStories() {\r\n    const that = this;\r\n    this.http.get(this.PUBLIC_STORY_URL, {}, {})\r\n      .then(data => {\r\n        let content = data = JSON.parse(data.data);\r\n        for (var i = 0; i < content.length; i++) {\r\n          content[i].medium = 'cloud'; // TODO const and object\r\n          that.availableStories.push(content[i]);\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.log(error.status);\r\n        console.log(error.error); // error message as string\r\n        console.log(error.headers);\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Creates a loading view without presenting it\r\n   * @param content content for the loading view\r\n   */\r\n  private createLoading(content: string): Loading {\r\n    let options: LoadingOptions = {\r\n      content: content\r\n    };\r\n    let loading = this.loadingCntrl.create(options);\r\n    return loading;\r\n  }\r\n\r\n  private downloadProgressStr(title: string, loaded: number, total: number): string {\r\n    return this.translate.instant('STORY_DOWNLOAD_PROGRESS', {\r\n      \"title\": title,\r\n      \"progress\": Math.round((loaded / total) * 100) + '%'\r\n    });\r\n  }\r\n\r\n  private unpackingProgressStr(title: string, loaded: number, total: number): string {\r\n    return this.translate.instant('STORY_UNPACKING_PROGRESS', {\r\n      \"title\": title,\r\n      \"progress\": Math.round((loaded / total) * 100) + '%'\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Updates the content of a loading and forces a ui refresh\r\n   * @param content new content for the loading\r\n   * @param loading loading to be updated\r\n   */\r\n  private updateLoadingContent(content: string, loading: Loading) {\r\n    //Without zone.run, the new content is not displayed\r\n    this.zone.run(() => {\r\n      loading.setContent(content);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Downloads and installs a story from a remote URL specified in the StoryInformationWithUrl\r\n   * @param story Story to download and install\r\n   */\r\n  public installPublicStory(story: StoryInformationWithUrl) {\r\n    if (this.storyProvider.exists(story.id)) {\r\n      this.alertStoryAlreadyExists(story.title);\r\n    } else {\r\n      let url = story.url;\r\n      let zipFileName = story.id + \".zip\";\r\n      const targetFolderForZip = this.file.externalRootDirectory + \"taletime/\";\r\n      const zipFilePath = targetFolderForZip + zipFileName;\r\n      let loading = this.createLoading(this.downloadProgressStr(story.title, 0, 100));\r\n      const fileTransfer: FileTransferObject = this.transfer.create();\r\n      loading.present();\r\n      fileTransfer.onProgress((event: ProgressEvent) => {\r\n        //The loading instance hast to be refreshed within the zone.run method because otherwise\r\n        //the progress is not updated automatically\r\n        this.updateLoadingContent(this.downloadProgressStr(story.title, event.loaded, event.total), loading);\r\n      });\r\n      //Download the Zip-File\r\n      fileTransfer.download(url, zipFilePath).then((entry) => {\r\n        let localUrl = entry.toURL();\r\n        //Unzip into the story folder\r\n        this.zip.unzip(localUrl, targetFolderForZip, (progressEvent) => {\r\n          //Display unpacking progress\r\n          this.updateLoadingContent(this.unpackingProgressStr(story.title, progressEvent.loaded, progressEvent.total), loading);\r\n        }).then((result) => {\r\n          if (result === 0) {\r\n            this.file.removeFile(targetFolderForZip, zipFileName).then(removeRes => {\r\n              this.storyProvider.addStory(story);\r\n              loading.dismiss();\r\n              this.alertStoryAddedSucessfully(story.title);\r\n            }).catch(error => {\r\n              loading.dismiss();\r\n              this.toastProvider.displayToast(this.translate.instant('STORY_ZIP_REMOVE_FAIL'));\r\n              console.log(\"Could not remove downloaded Zip!\");\r\n            });\r\n          } else if (result === -1) {\r\n            console.log('Unzipping the file failed!');\r\n            this.toastProvider.displayToast(this.translate.instant('STORY_ZIP_UNPACK_FAIL'));\r\n          }\r\n        });\r\n\r\n      }, (error) => {\r\n        loading.dismiss();\r\n        this.toastProvider.displayToast(this.translate.instant('STORY_DOWNLOAD_FAIL'));\r\n        console.error(\"Could not download the file: \" + url + \" to path: \" + zipFilePath);\r\n        console.error(JSON.stringify(error));\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Alert for already existing story\r\n   * @param storyTitle title of the story\r\n   */\r\n  private alertStoryAlreadyExists(storyTitle: string) {\r\n    //story already exists --> display a message and return\r\n    this.alert.createAlert(\r\n      this.translate.instant('STORY_ALREADY_EXISTS_TITLE'),\r\n      '',\r\n      [{ text: this.translate.instant('COMMON_OK') }],\r\n      this.translate.instant('STORY_ALREADY_EXISTS_MSG', { story_title: storyTitle })\r\n    ).present();\r\n  }\r\n\r\n  /**\r\n   * Alert for successful installation of a story\r\n   * @param storyTitle title of the new story\r\n   */\r\n  private alertStoryAddedSucessfully(storyTitle: string) {\r\n    this.alert.createAlert(\r\n      this.translate.instant('STORY_ADDED'),\r\n      '',\r\n      [{ text: this.translate.instant('COMMON_OK') }],\r\n      this.translate.instant('STORY_ADDED_MSG', { story_title: storyTitle })\r\n    ).present();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/availableStories/availableStories.ts","import { Injectable } from \"@angular/core\";\r\nimport { Media, MediaObject } from '@ionic-native/media';\r\nimport { EventEmitter } from \"events\";\r\nimport { LoggerProvider } from \"../logger/logger\";\r\n\r\n/**\r\n * @author Markus Altmeyer\r\n */\r\n\r\n@Injectable()\r\nexport class AudioProvider {\r\n    private  mediaObject: MediaObject;\r\n    private emitter: EventEmitter;\r\n    private isPlaying: Boolean = false;\r\n    constructor(private media: Media,private logger: LoggerProvider){\r\n\r\n    }\r\n\r\n    /**\r\n     * Loads an audio file. After this the file can be played, stopped etc\r\n     * @param audioPath Pfad zur Audiodatei\r\n     * @param audioFinishedCallback  Gets called when the audio file finishes playing. This is true if auido finishes playing or when stop is called while audio is playing\r\n     * @param errorCallback Gets called when an error occures.\r\n     */\r\n    loadAudio(audioPath: string, audioFinishedCallback?,errorCallback?){\r\n        this.mediaObject = this.media.create(audioPath);\r\n        this.emitter = new EventEmitter;\r\n\t\t//Subscribe for events\r\n\t\tthis.mediaObject.onStatusUpdate.subscribe((status) =>{\r\n            switch(status){\r\n                case this.media.MEDIA_STARTING:\r\n                    this.logger.log(\"[Media] Started\");\r\n                    // this.emitter.emit(\"started\");\r\n                    break;\r\n                case this.media.MEDIA_RUNNING:\r\n                    this.logger.log(\"[Media] Running\");\r\n                    this.emitter.emit(\"started\");\r\n                    break;\r\n                case this.media.MEDIA_PAUSED:\r\n                    this.logger.log(\"[Media] Paused\");\r\n                    this.emitter.emit(\"paused\");\r\n                    break;\r\n                case this.media.MEDIA_STOPPED:\r\n                    this.logger.log(\"[Media] Stopped\");\r\n                    this.emitter.emit(\"stopped\");\r\n                    break;\r\n            }\r\n\r\n\t\t})\r\n\r\n\t\t// Gets called when audio finishes playing. Could be either when the file finishes, or when stop gets called while audio was playing\r\n\t\tthis.mediaObject.onSuccess.subscribe(() => {\r\n            this.logger.log(\"[Media] Audio finished\")\r\n            \r\n            this.isPlaying = false;\r\n\r\n            //file finishes playing or was stopped\r\n            if(audioFinishedCallback){\r\n                audioFinishedCallback();\r\n            }\r\n\t\t});\r\n\r\n        //Error could be an error while loading the audio file\r\n        //Error code: https://github.com/apache/cordova-plugin-media#constants-1\r\n\t\tthis.mediaObject.onError.subscribe((error) => {\r\n            this.logger.log(error);\r\n            this.isPlaying = false;\r\n\t\t\tif(errorCallback){\r\n                errorCallback(error);\r\n            }\r\n\t\t});\r\n    }\r\n\r\n    /**\r\n     * Starts playing or resuming an audio file\r\n     */\r\n    play(): Promise<any>{\r\n        return new Promise(resolve =>{\r\n            if(!this.isPlaying){\r\n                this.isPlaying = true;\r\n                this.emitter.once('started',()=>{\r\n                    resolve();\r\n                })\r\n                this.mediaObject.play();\r\n            }else{\r\n                resolve();\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Pauses an audio file if playing\r\n     */\r\n    pause(): Promise<any>{\r\n        return new Promise(resolve =>{\r\n            if(this.isPlaying){\r\n                this.isPlaying = false;\r\n                this.emitter.once('paused',()=>{\r\n                    resolve();\r\n                })\r\n                this.mediaObject.pause();\r\n            }else{\r\n                resolve();\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Stops an Audio file if playing\r\n     */\r\n    stop(): Promise<any>{\r\n        return new Promise(resolve =>{\r\n            if(this.isPlaying){\r\n                this.isPlaying = false;\r\n                this.emitter.once('stopped',()=>{\r\n                    resolve();\r\n                })\r\n                this.mediaObject.stop();\r\n            }else{\r\n                resolve();\r\n            }\r\n        })\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/audio/audio.ts","/**\r\n * Created by Kevin on 24.06.2017.\r\n * Matches a s string of speech recognition results to an answer\r\n */\r\n\r\nimport { Injectable } from \"@angular/core\";\r\n\r\nimport { MtgaNextStoryNode } from \"../../datamodels/story/story\";\r\nimport { LanguageFileProvider } from \"./languageFile\";\r\nimport { ANSWER_CHAPTER_BACKWARDS, ANSWER_CHAPTER_REPEAT } from \"../../app/constants\";\r\nimport { LoggerProvider } from \"../logger/logger\";\r\n\r\n@Injectable()\r\nexport class AnswerMatchingProvider {\r\n\r\n  constructor(private languageFileProvider: LanguageFileProvider, private logger: LoggerProvider) {\r\n  }\r\n\r\n  public match(result: string[], answers: MtgaNextStoryNode[]): MtgaNextStoryNode | string | null {\r\n\r\n    if (answers.length != 1) {\r\n      // find exact math considering the hierachy\r\n      for (let i = 0; i < result.length; i++) {\r\n        for (let answer of answers) {\r\n          if (AnswerMatchingProvider.checkContent(answer.value, result[i])) {\r\n            this.logger.log(answer.value + \" matched to answer\");\r\n            return answer;\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      // only one answer possible, the system asks if the user wants to continue\r\n      // therefore check if user agrees\r\n      for (let i = 0; i < result.length; i++) {\r\n        for (let a of this.languageFileProvider.preDefinedTexts.agree) {\r\n          if (AnswerMatchingProvider.checkContent(a.value, result[i])) {\r\n            this.logger.log(a.value + \" matched to answer\");\r\n            return answers[0]; // it is only one possible here\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // nothing found so far, check for numbers\r\n    for (let i = 0; i < result.length; i++) {\r\n      for (let e of this.languageFileProvider.preDefinedTexts.enum) {\r\n        if (AnswerMatchingProvider.checkContent(e.value, result[i])) {\r\n          return answers[e.index - 1]\r\n        }\r\n      }\r\n    }\r\n\r\n    // navigate backwards\r\n    for (let i = 0; i < result.length; i++) {\r\n      for (let e of this.languageFileProvider.preDefinedTexts.backwards) {\r\n        if (AnswerMatchingProvider.checkContent(e.value, result[i])) {\r\n          return ANSWER_CHAPTER_BACKWARDS;\r\n        }\r\n      }\r\n    }\r\n\r\n    // repeat current chapter\r\n    for (let i = 0; i < result.length; i++) {\r\n      for (let e of this.languageFileProvider.preDefinedTexts.repeatChapter) {\r\n        if (AnswerMatchingProvider.checkContent(e.value, result[i])) {\r\n          return ANSWER_CHAPTER_REPEAT;\r\n        }\r\n      }\r\n    }\r\n\r\n    // does not matter\r\n    for (let i = 0; i < result.length; i++) {\r\n      for (let e of this.languageFileProvider.preDefinedTexts.doNotCare) {\r\n        if (AnswerMatchingProvider.checkContent(e.value, result[i])) {\r\n          return answers[AnswerMatchingProvider.createRandomNumber(answers.length)];\r\n        }\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  private static checkContent(search: string, containedIn: string) {\r\n    search = AnswerMatchingProvider.removeSpecialCharacters(search);\r\n    console.log(\"Checking if <\" + containedIn.toLowerCase() + \"> contains <\" + search.toLowerCase() + \">\");\r\n    return containedIn.toLowerCase().indexOf(search.toLowerCase()) > -1;\r\n  }\r\n\r\n  private static removeSpecialCharacters(s: string) {\r\n    return s.replace(/[^a-zA-Z0-9\\s]/g, '');\r\n  }\r\n\r\n  private static createRandomNumber(max: number): number {\r\n    return Math.ceil(Math.random() * max);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/speechRecognition/answerMatching.ts","import { Injectable } from \"@angular/core\";\r\n\r\nimport { LanguageFileProvider } from \"./languageFile\";\r\nimport { MtgaNextStoryNode } from \"../../datamodels/story/story\";\r\nimport { LoggerProvider } from \"../logger/logger\";\r\n/**\r\n * Created by Kevin on 24.06.2017.\r\n * Creates texts for reading out the answers\r\n */\r\n\r\n@Injectable()\r\nexport class TtsTextProvider {\r\n\r\n  constructor(private languageFileProvider: LanguageFileProvider, private logger: LoggerProvider) { }\r\n\r\n  public createAnswersText(answers: MtgaNextStoryNode[]): string {\r\n    let text: string;\r\n\r\n    this.logger.log(\"Reading answers out for these possible answers: \" + JSON.stringify(answers));\r\n\r\n    if (answers.length == 1) {\r\n      // only one possible answer\r\n      this.logger.log(\"There's only one possible answer\");\r\n      let i = this.generateRandomNumber(this.languageFileProvider.preDefinedTexts.answers.single.length);\r\n      text = this.languageFileProvider.preDefinedTexts.answers.single[i].value;\r\n    } else {\r\n      // multiple possible answers\r\n      this.logger.log(\"There are multiple possible answers\");\r\n      let i = this.generateRandomNumber(this.languageFileProvider.preDefinedTexts.answers.single.length);\r\n      text = this.languageFileProvider.preDefinedTexts.answers.multiple[i].value;\r\n      for (let i = 0; i < answers.length; i++) {\r\n        if (i != answers.length - 1) {\r\n          text = text + \" \" + answers[i].value;\r\n          if (i < answers.length - 2) {\r\n            text = text + \",\";\r\n          }\r\n        } else {\r\n          let j = this.generateRandomNumber(this.languageFileProvider.preDefinedTexts.linking.or.length);\r\n          text = text + \" \" + this.languageFileProvider.preDefinedTexts.linking.or[j].value + \" \" + answers[i].value + \"?\";\r\n        }\r\n      }\r\n    }\r\n\r\n    this.logger.log(\"Created answer text : \" + text);\r\n    return text;\r\n  }\r\n\r\n  private generateRandomNumber(l: number) {\r\n    this.logger.log(\"Generating random number less than \" + l);\r\n    return Math.ceil(Math.random() * l) - 1;\r\n  }\r\n\r\n  public createRepeatText(): string {\r\n    let i = this.generateRandomNumber(this.languageFileProvider.preDefinedTexts.repeat.length);\r\n    return this.languageFileProvider.preDefinedTexts.repeat[i].value;\r\n  }\r\n\r\n  createAnswerHelp(): string {\r\n    let i = this.generateRandomNumber(this.languageFileProvider.preDefinedTexts.answers.help.length);\r\n    return this.languageFileProvider.preDefinedTexts.answers.help[i].value;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/speechRecognition/ttsText.ts","/**\r\n *\r\n * @author Matthias Kiefer\r\n * @date 2017-11-28\r\n */\r\nimport { Component } from '@angular/core';\r\nimport { NavController } from 'ionic-angular';\r\nimport { AuthProvider } from '../../providers/auth/auth';\r\nimport { UserProfile } from \"../../datamodels/userProfile\"; // for avatars\r\n\r\n@Component({\r\n  selector: 'page-createUserProfile',\r\n  templateUrl: 'createUserProfile.html'\r\n})\r\n\r\nexport class CreateUserProfilePage {\r\n  activeAvatarId: number;\r\n  profileCredentials = { name: '', avatarId: 0, child: false };\r\n  profileAvatars;\r\n\r\n  constructor(private navCtrl: NavController, private authProvider: AuthProvider) {\r\n    this.profileAvatars = UserProfile.avatars();\r\n    this.selectAvatar(null, 0);\r\n  }\r\n\r\n\r\n  public selectAvatar(event, avatarId) {\r\n    if (event) {\r\n      event.stopPropagation();\r\n    }\r\n\r\n    this.activeAvatarId = avatarId;\r\n  }\r\n\r\n  public create() {\r\n    this.profileCredentials.avatarId = this.activeAvatarId;\r\n\r\n    this.authProvider.createUserProfile(this.profileCredentials).subscribe(success => {\r\n      if (success) {\r\n        this.close();\r\n      }\r\n    }, error => {\r\n      console.log(\"CreateUserProfilePage-create(): \" + JSON.stringify(error));\r\n    });\r\n  }\r\n\r\n  public close() {\r\n    this.navCtrl.pop();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/createUserProfile/createUserProfile.ts","import { Injectable } from \"@angular/core\";\r\nimport { File } from \"@ionic-native/file\";\r\nimport { APP_NAME } from \"../../app/constants\";\r\nimport { LoggerProvider } from \"../logger/logger\";\r\n\r\n\r\n@Injectable()\r\nexport class StorageProvider {\r\n\r\n    constructor(private file: File, private logger: LoggerProvider) {}\r\n\r\n    /**\r\n     * Check if the taletime directory on the external root dir exists\r\n     * or create it and ask for the file permission\r\n     */\r\n    public createAppDirOnExtRoot(): Promise<boolean>{\r\n        const promise = new Promise<boolean>((resolve, reject) => {\r\n            let path = this.file.externalRootDirectory;\r\n            let datadir = path + APP_NAME + \"/\";\r\n            //make sure dir exists\r\n            this.file.checkDir(path, APP_NAME).then(() => {\r\n                this.logger.log(path + \"/\" + APP_NAME + \" exists!\");\r\n                this.getPermission(path).then(() => {\r\n                    resolve(true);\r\n                }).catch((error) => reject(error));\r\n            }).catch(\r\n                () => {\r\n                    this.logger.log(\"<\" + datadir + \" does not exist!\");\r\n                    this.logger.log(\"Creating directory <\" + datadir + \">\");\r\n                    this.file.createDir(path, APP_NAME, true).then(() => {\r\n                        this.logger.log(\"Directory created successfully\");\r\n                        this.getPermission(path).then(() => resolve(true)).catch(error => reject(error));\r\n                    }).catch(\r\n                        (err) => {\r\n                            this.logger.error(\"Directory <\" + datadir + \"> could not be created\");\r\n                            this.logger.error(JSON.stringify(err));\r\n                            reject(err);\r\n                        });\r\n\r\n                });\r\n        });\r\n        return promise;\r\n    }\r\n\r\n    /**\r\n     * Creates an empty file named 0 to ask for the file permission\r\n     * @TODO: Find a better way to ask for the permission\r\n     * @param path app folder path on the external root dir\r\n     */\r\n    private getPermission(path: string): Promise<boolean>{\r\n        const promise = new Promise<boolean>((resolve, reject) => {\r\n            this.file.createFile(path, '0', true).then(() => {\r\n                resolve(true);\r\n            }).catch(error => {\r\n                reject(new Error(\"Could not write to app directory!\"));\r\n            })\r\n        });\r\n        return promise;\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/common/storage.ts","import { Injectable } from '@angular/core';\r\nimport { isDevMode } from '@angular/core';\r\n\r\n\r\n@Injectable()\r\nexport class LoggerProvider {\r\n\r\n  constructor(){}\r\n  /**\r\n   * log\r\nmessage   */\r\n  public log(message) {\r\n    if (isDevMode())\r\n    {\r\n      console.log(this.expandToMessage(message));\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * warn\r\n   */\r\n  public warn(message) {\r\n    if (isDevMode()){\r\n      console.warn(this.expandToMessage(message));\r\n    }\r\n  }\r\n\r\n  private expandToMessage(msgOrObj: any) {\r\n    let message: string = \"\";\r\n    if ((typeof msgOrObj) === 'string' || msgOrObj instanceof String) {\r\n      //error is a string\r\n      message = <string> msgOrObj;\r\n    } else {\r\n      if (msgOrObj.hasOwnProperty(\"constructor\") && msgOrObj.constructor.hasOwnProperty(\"name\")) {\r\n        //There is a constructor/class name defined\r\n        message = msgOrObj.constructor.name;\r\n      } else {\r\n        //No constructor name is set --> use the object's prototype name as fallback method\r\n        message = Object.prototype.toString.call(msgOrObj);\r\n      }\r\n      if (msgOrObj.hasOwnProperty(\"message\")){\r\n        message += \" : \" + msgOrObj.message;\r\n      }\r\n      else {\r\n        message += \" : \" + JSON.stringify(msgOrObj);\r\n      }\r\n    }\r\n    return message;\r\n  }\r\n\r\n  /**\r\n   * error\r\n   */\r\n  public error(error) {\r\n    if (isDevMode()) {\r\n      console.error(this.expandToMessage(error));\r\n    }\r\n  }\r\n\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/logger/logger.ts","import { Injectable } from '@angular/core';\r\nimport { Storage } from '@ionic/storage';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport 'rxjs/add/operator/map';\r\nimport { AlertController } from \"ionic-angular\";\r\nimport { UserAccount } from \"../../datamodels/userAccount\";\r\nimport { UserProfile } from \"../../datamodels/userProfile\";\r\nimport { LoggerProvider } from '../logger/logger';\r\n\r\n/*\r\n  Generated class for the AuthProvider provider.\r\n\r\n  See https://angular.io/guide/dependency-injection for more info on providers\r\n  and Angular DI.\r\n*/\r\n@Injectable()\r\nexport class AuthProvider {\r\n  static USER_ACCOUNT_KEY: string = 'userAccount';\r\n  currentUser: UserAccount;\r\n  constructor(private storage: Storage, private alertCtrl: AlertController,private logger: LoggerProvider) { }\r\n\r\n  public login(credentials) {\r\n    console.log(credentials);\r\n    if (credentials.email === null || credentials.pin === null) {\r\n      return Observable.throw(\"Please insert credentials\");\r\n    } else {\r\n      return Observable.create(observer => {\r\n        // TODO At this point make a request to your backend to make a real check!\r\n        let access = false;\r\n        this.storage.ready().then(() => this.storage.get(AuthProvider.USER_ACCOUNT_KEY).then((val) => {\r\n          console.log(val);\r\n          if (val) {\r\n            let storageUser = new UserAccount(val.name, val.email, val.pin, val.userProfiles);\r\n            access = (credentials.pin === storageUser.pin && credentials.email === storageUser.email); // TODO workaround because pin is store as pin (later in hash). Must be check via UserAccount and checkPin()\r\n            if (access) {\r\n              this.currentUser = storageUser;\r\n            }\r\n          }\r\n\r\n          observer.next(access);\r\n          observer.complete();\r\n        }));\r\n      });\r\n\r\n    }\r\n  }\r\n\r\n  public addTestUser() {\r\n    console.log(\"Test\");\r\n    let userAccount = new UserAccount(\"Test\", \"test@mail.com\", \"1234\");\r\n    this.storage.set(AuthProvider.USER_ACCOUNT_KEY, userAccount);\r\n    this.storage.ready().then(() => this.storage.get(AuthProvider.USER_ACCOUNT_KEY).then((val) => {\r\n      console.log(val);\r\n    }));\r\n  }\r\n\r\n  public register(credentials) {\r\n    if (credentials.email === null || credentials.name === null || credentials.pin === null) {\r\n      return Observable.throw(\"Please insert credentials\");\r\n    } else {\r\n      // TODO At this point store the credentials to your backend!\r\n      let userAccount = new UserAccount(credentials.name, credentials.email, credentials.pin);\r\n      this.save(userAccount);\r\n\r\n      return Observable.create(observer => {\r\n        observer.next(true);\r\n        observer.complete();\r\n      });\r\n    }\r\n  }\r\n\r\n  public createUserProfile(credentials) {\r\n    if (credentials.name === null) {\r\n      return Observable.throw(\"Please insert credentials\");\r\n    } else {\r\n      // TODO At this point store the credentials to your backend!\r\n      let userProfile = new UserProfile(credentials.name, credentials.avatarId, credentials.child);\r\n      this.currentUserAccount.addUserProfile(userProfile);\r\n      this.save();\r\n\r\n      return Observable.create(observer => {\r\n        observer.next(true);\r\n        observer.complete();\r\n      });\r\n    }\r\n  }\r\n\r\n  public changePin(oldPin: any, newPin: any, retypePin: any) {\r\n    let response = {\r\n      success: true,\r\n      reason: ''\r\n    };\r\n\r\n    if (this.currentUserAccount.checkPin(oldPin)) {\r\n      if (newPin === retypePin) {\r\n        this.currentUserAccount.pin = newPin;\r\n        this.save();\r\n      } else {\r\n        response.success = false;\r\n        response.reason = 'New pin do not match' // TODO Tobi i18n\r\n      }\r\n    } else {\r\n      response.success = false;\r\n      response.reason = 'Old pin do not match' // TODO Tobi i18n\r\n    }\r\n\r\n    return Observable.create(observer => {\r\n      observer.next(response);\r\n      observer.complete();\r\n    });\r\n  }\r\n\r\n  public deleteUserProfile(userProfileId) {\r\n    this.currentUserAccount.removeUserProfile(userProfileId);\r\n    this.save();\r\n\r\n    return Observable.create(observer => {\r\n      observer.next(true);\r\n      observer.complete();\r\n    });\r\n  }\r\n\r\n  public setActiveUserProfile(userProfileId) {\r\n    this.currentUserAccount.setActiveUserProfile(userProfileId);\r\n    this.save();\r\n\r\n    return Observable.create(observer => {\r\n      observer.next(true);\r\n      observer.complete();\r\n    });\r\n  }\r\n\r\n  public getActiveUserProfile() {\r\n    return this.currentUserAccount.activeUserProfile;\r\n  }\r\n\r\n  public getUserAccount(callback): void {\r\n    let userAccount;\r\n    this.storage.ready().then(() => this.storage.get(AuthProvider.USER_ACCOUNT_KEY).then((val) => {\r\n      if (val) {\r\n        userAccount = new UserAccount(val.name, val.email, val.pin);\r\n      }\r\n      callback(userAccount);\r\n    }).catch(storageError => {\r\n      //TODO: Matthias - Handle storage errors\r\n      this.logger.error(storageError);\r\n    }));\r\n  }\r\n\r\n  public logout() {\r\n    return Observable.create(observer => {\r\n      this.currentUser = null;\r\n      this.storage.remove(AuthProvider.USER_ACCOUNT_KEY);\r\n      observer.next(true);\r\n      observer.complete();\r\n    });\r\n  }\r\n\r\n  private save(userAccount?: UserAccount) {\r\n    this.storage.set(AuthProvider.USER_ACCOUNT_KEY, (userAccount || this.currentUserAccount));\r\n  }\r\n\r\n  public isValid(pin: any): boolean {\r\n    return this.currentUser.isValid(pin);\r\n  }\r\n\r\n  get currentUserAccount(): UserAccount {\r\n    return this.currentUser;\r\n  }\r\n\r\n  get userProfiles() {\r\n    return Array.from(this.currentUserAccount.userProfiles.values());\r\n  }\r\n\r\n  /*** UI ***/\r\n  public presentPinPrompt(validFn: Function, cancelFn?: Function) {\r\n    return this.alertCtrl.create({\r\n      title: 'PIN-Eingabe', // TODO tobi i18\r\n      inputs: [\r\n        {\r\n          name: 'pin',\r\n          placeholder: 'Pin', // TODO tobi i18\r\n          type: 'password'\r\n        }\r\n      ],\r\n      buttons: [\r\n        {\r\n          text: 'Cancel', // TODO tobi i18\r\n          role: 'cancel',\r\n          handler: data => {\r\n            if (cancelFn) {\r\n              cancelFn(data);\r\n            } else {\r\n              this.logger.log('Cancel clicked');\r\n            }\r\n          }\r\n        },\r\n        {\r\n          text: 'Ok', // TODO tobi i18\r\n          handler: data => {\r\n            if (validFn) {\r\n              validFn(this.isValid(data.pin));\r\n            } else {\r\n              this.logger.log('Ok clicked');\r\n            }\r\n\r\n          }\r\n        }\r\n      ]\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/auth/auth.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app.module';\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\r\nimport { ErrorHandler, NgModule } from '@angular/core';\r\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\r\nimport { HTTP } from '@ionic-native/http';\r\nimport { MyApp } from './app.component';\r\n\r\n/** Pages import */\r\nimport { TabsPage } from '../pages/tabs/tabs';\r\n\r\nimport { StartPage } from \"../pages/start/start\"\r\nimport { StoryMenuPage } from \"../pages/storyMenu/storyMenu\";\r\n\r\nimport { UserAccountPage } from \"../pages/userAccount/userAccount\";\r\nimport { CreateUserAccountPage } from \"../pages/createUserAccount/createUserAccount\";\r\n\r\nimport { SelectUserProfilePage } from \"../pages/selectUserProfile/selectUserProfile\";\r\nimport { CreateUserProfilePage } from \"../pages/createUserProfile/createUserProfile\";\r\nimport { SettingsPage } from \"../pages/settings/settings\";\r\nimport { AvailableStoriesPage } from \"../pages/availableStories/availableStories\";\r\nimport { StoryDetailsPage } from \"../pages/storyDetails/storyDetails\";\r\nimport { InfoPage } from \"../pages/info/info\";\r\nimport { PlayerPage } from \"../pages/player/player\";\r\nimport { ChangeUserAccountPinPage } from \"../pages/change-user-account-pin/change-user-account-pin\";\r\n\r\nimport {CreditsPage} from \"../pages/credits/credits\";\r\nimport {ImpressumPage} from \"../pages/impressum/impressum\";\r\n\r\n/** Providers import */\r\nimport { AlertProvider } from \"../providers/alert/alert\";\r\nimport { StoryProvider } from \"../providers/story/story\";\r\nimport { SettingsProvider } from \"../providers/settings/settings\";\r\nimport { AnswerMatchingProvider } from \"../providers/speechRecognition/answerMatching\";\r\nimport { LanguageFileProvider } from \"../providers/speechRecognition/languageFile\";\r\nimport { TtsTextProvider } from \"../providers/speechRecognition/ttsText\";\r\nimport { StorageProvider } from \"../providers/common/storage\";\r\nimport { AudioProvider } from \"../providers/audio/audio\";\r\nimport { AuthProvider } from '../providers/auth/auth';\r\n\r\n\r\n/** Ionic framework imports */\r\nimport { HttpClientModule, HttpClient } from '@angular/common/http';\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\r\nimport { IonicStorageModule } from '@ionic/storage';\r\nimport { TextToSpeech } from \"@ionic-native/text-to-speech\";\r\nimport { SpeechRecognition } from \"@ionic-native/speech-recognition\";\r\nimport { NativeAudio } from \"@ionic-native/native-audio\";\r\nimport { Globalization } from \"@ionic-native/globalization\";\r\nimport { File } from \"@ionic-native/file\";\r\nimport { StatusBar } from '@ionic-native/status-bar';\r\nimport { SplashScreen } from '@ionic-native/splash-screen';\r\nimport { SaveGameProvider } from '../providers/savegame/savegame';\r\nimport { FileTransfer } from '@ionic-native/file-transfer';\r\nimport { Zip } from '@ionic-native/zip';\r\nimport { PublicStoryHelperProvider } from '../providers/public-story-helper/public-story-helper';\r\n//installed version 4.0.0 instead of latest, latest requires cordova-plugin-file@6.0.0 but file-transfer plugin requires cordova-plugin-file@5.0.0\r\nimport { Media } from '@ionic-native/media';\r\nimport { SimpleToastProvider } from '../providers/simple-toast/simple-toast';\r\nimport { LoggerProvider } from '../providers/logger/logger';\r\nimport { PlatformBridgeProvider } from '../providers/platform-bridge/platform-bridge';\r\n\r\nexport function createTranslateLoader(http: HttpClient) {\r\n  return new TranslateHttpLoader(http, './assets/i18n/', '.json');\r\n}\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MyApp,\r\n    TabsPage,\r\n    StartPage,\r\n    UserAccountPage,\r\n    CreateUserAccountPage,\r\n    CreateUserProfilePage,\r\n    ChangeUserAccountPinPage,\r\n    SelectUserProfilePage,\r\n    StoryMenuPage,\r\n    SettingsPage,\r\n    AvailableStoriesPage,\r\n    StoryDetailsPage,\r\n    InfoPage,\r\n    PlayerPage,\r\n    CreditsPage,\r\n    ImpressumPage\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    IonicModule.forRoot(MyApp),\r\n    IonicStorageModule.forRoot({\r\n      name: '__taletimedb',\r\n      driverOrder: ['indexeddb', 'sqlite', 'websql']\r\n    }),\r\n    HttpClientModule,\r\n    TranslateModule.forRoot({\r\n      loader: {\r\n        provide: TranslateLoader,\r\n        useFactory: (createTranslateLoader),\r\n        deps: [HttpClient]\r\n      }\r\n    })\r\n  ],\r\n  bootstrap: [IonicApp],\r\n  entryComponents: [\r\n    MyApp,\r\n    TabsPage,\r\n    StartPage,\r\n    CreateUserAccountPage,\r\n    CreateUserProfilePage,\r\n    ChangeUserAccountPinPage,\r\n    SelectUserProfilePage,\r\n    UserAccountPage,\r\n    StoryMenuPage,\r\n    SettingsPage,\r\n    AvailableStoriesPage,\r\n    StoryDetailsPage,\r\n    InfoPage,\r\n    PlayerPage,\r\n    CreditsPage,\r\n    ImpressumPage\r\n  ],\r\n  providers: [\r\n    StatusBar,\r\n    SplashScreen,\r\n    { provide: ErrorHandler, useClass: IonicErrorHandler },\r\n    AlertProvider,\r\n    HTTP,\r\n    StoryProvider,\r\n    LoggerProvider,\r\n    SettingsProvider,\r\n    AnswerMatchingProvider,\r\n    LanguageFileProvider,\r\n    TtsTextProvider,\r\n    File,\r\n    Zip,\r\n    FileTransfer,\r\n    NativeAudio,\r\n    TextToSpeech,\r\n    SpeechRecognition,\r\n    StorageProvider,\r\n    AudioProvider,\r\n    Globalization,\r\n    SaveGameProvider,\r\n    AuthProvider,\r\n    PublicStoryHelperProvider,\r\n    Media,\r\n    SimpleToastProvider,\r\n    PlatformBridgeProvider\r\n  ]\r\n})\r\nexport class AppModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { TTS_RATE_NORMAL_VALUE } from \"../app/constants\";\r\n/**\r\n * Created by Kevin on 30.06.2017.\r\n * Datamodel for all settings available to control the general behavior of the app\r\n */\r\n\r\nexport class Settings {\r\n\r\n  public autoPlay: boolean = true;\r\n  public language: string = 'de-DE';\r\n  public speechRecognition: boolean = false;\r\n  public interaction: boolean = false;\r\n  public ttsRate: number = TTS_RATE_NORMAL_VALUE;\r\n\r\n  // TODO font size needs to be added\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/datamodels/settings.ts","/**\r\n *\r\n * @author Matthias Kiefer\r\n * @date 2017-11-19\r\n */\r\nimport { UserProfile } from \"./userProfile\";\r\n\r\nexport class UserAccount {\r\n  public name: string;\r\n  public email: string;\r\n  public pin: any;\r\n\r\n  public userProfiles: Map<string, UserProfile>;\r\n  public activeUserProfile: UserProfile;\r\n\r\n  constructor(name: string, email: string, pin: any, userProfiles?: Map<string, UserProfile>) {\r\n    this.name = name;\r\n    this.email = email;\r\n    this.pin = pin;\r\n    this.userProfiles = userProfiles || new Map<string, UserProfile>();\r\n  }\r\n\r\n  // set pin(pin: any) {\r\n  //   this._pin = pin; // TODO hash\r\n  // }\r\n  //\r\n  // get pin() {\r\n  //   return this._pin;\r\n  // }\r\n\r\n  public checkPin(pin: any) {\r\n    return (pin === this.pin);\r\n  }\r\n\r\n  public addUserProfile(userProfile: UserProfile) {\r\n    this.userProfiles.set(userProfile.id, userProfile);\r\n  }\r\n\r\n  public removeUserProfile(userProfileId: string) {\r\n    this.userProfiles.delete(userProfileId);\r\n  }\r\n\r\n  public setActiveUserProfile(userProfileId) {\r\n    this.activeUserProfile = this.userProfiles.get(userProfileId);\r\n  }\r\n\r\n  public isValid(pin: any): boolean {\r\n    return (this.pin === pin);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/datamodels/userAccount.ts","export class StoryInformation { // TODO tobi des todes!\r\n    public id: string;\r\n    public title: string;\r\n    public author: string[];\r\n    public date: number;\r\n    public language: string;\r\n    public shortDescription: string;\r\n    public readers: Reader[];\r\n    public medium: string;\r\n    public cover: string; // TODO tobi evtl. base64\r\n}\r\n\r\nexport class StoryInformationWithUrl extends StoryInformation {\r\n    public url: string;\r\n}\r\n\r\nexport class Reader {\r\n    name: string;\r\n    answersPartOfAudioFile: boolean;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/datamodels/storyInformation.ts","import { DEFAULT_READER } from \"../app/constants\";\r\nexport class Savegame {\r\n    storyId: string; //or Story ID ? by now there is no big difference\r\n    //chosenPath: Stack<number>;\r\n    chosenPath: Array<number>;\r\n    reader: string = DEFAULT_READER;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/datamodels/savegame.ts","export interface Story {\r\n  \"mtga-story\": {\r\n    attributes: StoryMetaData,\r\n    \"mtga-story-node\": any;\r\n  }\r\n}\r\n\r\nexport class StoryMetaData {\r\n  id: string;\r\n  title: string;\r\n  imgCover: string;\r\n  lang: string;\r\n  desc: string;\r\n  creator: string;\r\n  medium: string; //cloud or device\r\n}\r\n\r\nexport interface MtgaStoryNode {\r\n  attributes: ChapterAttributes,\r\n  \"mtga-nodeText\": {\r\n    value: string,\r\n    attributes: {\r\n      textStyle: string\r\n    }\r\n  },\r\n  \"mtga-nextStoryNode\": any;\r\n}\r\n\r\nexport class ChapterAttributes {\r\n  audioSrc: string;\r\n  color: string;\r\n  name: string;\r\n  nodeTyp: string;\r\n  storyNodeId: string;\r\n}\r\n\r\nexport class MtgaNextStoryNode {\r\n  value: string;\r\n  attributes: {\r\n    id: string\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/datamodels/story/story.ts","import { Component, ViewChild } from '@angular/core';\r\nimport { Nav, Platform } from 'ionic-angular';\r\nimport { StatusBar } from '@ionic-native/status-bar';\r\nimport { SplashScreen } from '@ionic-native/splash-screen';\r\n\r\nimport { AVAILABLE_LANGUAGES, DEFAULT_LANG } from \"./constants\"; // added 2017-11-14\r\nimport { Globalization } from \"@ionic-native/globalization\"; // added 2017-11-14\r\nimport { SettingsProvider } from \"../providers/settings/settings\"; // added 2017-11-14\r\nimport { Subscription } from \"rxjs/Subscription\"; // added 2017-11-14\r\nimport { TranslateService } from '@ngx-translate/core'; // added for translation 2017-11-14\r\n\r\nimport { StartPage } from '../pages/start/start';\r\nimport { LoggerProvider } from '../providers/logger/logger';\r\n\r\n@Component({\r\n  templateUrl: 'app.html'\r\n})\r\nexport class MyApp {\r\n  @ViewChild(Nav) nav: Nav;\r\n\r\n  rootPage: any = StartPage;\r\n\r\n  pages: Array<{ title: string, component: any }>;\r\n\r\n  private settingsSubscription: Subscription;\r\n\r\n  constructor(\r\n    public platform: Platform,\r\n    public statusBar: StatusBar,\r\n    public splashScreen: SplashScreen,\r\n    private settings: SettingsProvider,\r\n    private translate: TranslateService,\r\n    private logger: LoggerProvider,\r\n    private globalization: Globalization) {\r\n\r\n    this.initializeApp();\r\n\r\n  }\r\n\r\n  initializeApp() {\r\n    this.platform.ready().then(() => {\r\n      // Okay, so the platform is ready and our plugins are available.\r\n      // Here you can do any higher level native things you might need.\r\n      // TODO add here the storage for user permission\r\n      this.statusBar.styleDefault();\r\n      this.splashScreen.hide();\r\n\r\n      this.translate.setDefaultLang(DEFAULT_LANG);\r\n\r\n      this.settingsSubscription = this.settings.onSettingsLoaded().subscribe(\r\n        () => {\r\n          if (this.settings.language == null) {\r\n            this.globalization.getPreferredLanguage().then(\r\n              (result) => {\r\n                this.logger.log(\"Preferred language of this device is \" + result.value);\r\n                let language = this.getSuitableLanguage(result.value);\r\n                this.translate.use(language);\r\n                this.settings.language = language;\r\n              }\r\n            );\r\n          } else {\r\n            this.translate.use(this.settings.language);\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  pushPage(page) {\r\n    // we want the back button to show in this scenario\r\n    this.nav.push(page.component);\r\n  }\r\n\r\n  openPage(page) {\r\n    // Reset the content nav to have just this page\r\n    // we wouldn't want the back button to show in this scenario\r\n    this.nav.setRoot(page.component);\r\n  }\r\n\r\n  getSuitableLanguage(language) {\r\n    language = language.substring(0, 2).toLowerCase();\r\n    return AVAILABLE_LANGUAGES.some(x => x.code == language) ? language : DEFAULT_LANG;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { Component } from '@angular/core';\r\nimport { NavController } from 'ionic-angular';\r\n\r\n@Component({\r\n  selector: 'page-info',\r\n  templateUrl: 'info.html'\r\n})\r\nexport class InfoPage {\r\n\r\n  constructor(public navCtrl: NavController) {\r\n\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/info/info.ts","/**\r\n * Created by Kevin on 24.06.2017.\r\n * Keeps track of all the settings made during runtime.\r\n */\r\n\r\nimport { Injectable } from \"@angular/core\";\r\nimport { SpeechRecognition } from \"@ionic-native/speech-recognition\";\r\nimport { Subject } from \"rxjs/Subject\";\r\nimport { Observable } from \"rxjs/Observable\";\r\nimport { LanguageFileProvider } from \"../speechRecognition/languageFile\";\r\nimport { AlertProvider } from \"../alert/alert\";\r\nimport { Settings } from \"../../datamodels/settings\";\r\nimport { Storage } from \"@ionic/storage\";\r\nimport { Platform } from \"ionic-angular/platform/platform\";\r\nimport { LoggerProvider } from \"../logger/logger\";\r\n\r\n@Injectable()\r\nexport class SettingsProvider {\r\n    // private logger : LoggerProvider;\r\n    private readonly SETTINGS_KEY = 'SETTINGS';\r\n    private settings: Settings;\r\n\r\n    private languageSubject: Subject<string> = new Subject();\r\n    private settingsLoaded: Subject<boolean> = new Subject();\r\n\r\n\r\n    constructor(\r\n        private platform: Platform,\r\n        private languageFile: LanguageFileProvider,\r\n        private storage: Storage,\r\n        private speechRecognitionProvider: SpeechRecognition,\r\n        private logger : LoggerProvider,\r\n        private alert: AlertProvider) {\r\n        this.platform.ready().then(() => {\r\n            this.storage.ready().then(() => {\r\n                this.loadSettings();\r\n            });\r\n        });\r\n\r\n    }\r\n\r\n    loadSettings() {\r\n        this.storage.get(this.SETTINGS_KEY).then(\r\n            (settings: Settings) => {\r\n                this.logger.log(\"Read settings from storage: \" + JSON.stringify(settings));\r\n                this.settings = settings;\r\n                this.reloadLanguageFile();\r\n                this.settingsLoaded.next(true);\r\n\r\n            }\r\n        ).catch(error => {\r\n            this.logger.log(error.message)\r\n            this.settings = new Settings();\r\n            this.save();\r\n            this.settingsLoaded.next(true);\r\n        });\r\n    }\r\n\r\n    get autoPlay(): boolean {\r\n        return this.settings.autoPlay;\r\n    }\r\n\r\n    set autoPlay(value: boolean) {\r\n        this.settings.autoPlay = value;\r\n        this.save();\r\n    }\r\n\r\n    get language(): string {\r\n        return this.settings.language;\r\n    }\r\n\r\n    set language(value: string) {\r\n        this.settings.language = value;\r\n        this.reloadLanguageFile();\r\n        this.save();\r\n    }\r\n\r\n    get speechRecognition(): boolean {\r\n        return this.settings.speechRecognition;\r\n    }\r\n\r\n    set speechRecognition(value: boolean) {\r\n        // make sure the user gave the permission to use the microphone\r\n        if (value && !this.speechRecognitionProvider.hasPermission()) {\r\n            this.speechRecognitionProvider.requestPermission().then(\r\n                () => this.settings.speechRecognition = value,\r\n                () => {\r\n                    this.alert.createAlert(\"Error\", \"Permission needed to use Speech Recognition\", [{ text: \"OK\" }]).present();\r\n                    this.settings.speechRecognition = false;\r\n                }\r\n            )\r\n        } else {\r\n            this.logger.log(\"Speech rec set to \" + value);\r\n            this.settings.speechRecognition = value;\r\n        }\r\n        this.save();\r\n    }\r\n\r\n    get interaction(): boolean {\r\n        return this.settings.interaction;\r\n    }\r\n\r\n    set interaction(value: boolean) {\r\n        this.settings.interaction = value;\r\n        this.save();\r\n    }\r\n\r\n    get ttsRate(): number {\r\n        return this.settings.ttsRate;\r\n    }\r\n\r\n    set ttsRate(value: number) {\r\n        this.settings.ttsRate = value;\r\n        this.save();\r\n    }\r\n\r\n    public onLanguageChanged(): Observable<string> {\r\n        return this.languageSubject.asObservable();\r\n    }\r\n\r\n    public onSettingsLoaded(): Observable<boolean> {\r\n        return this.settingsLoaded.asObservable();\r\n    }\r\n\r\n    private reloadLanguageFile() {\r\n        this.languageFile.loadLanguageFile(this.settings.language).subscribe(() => {\r\n            this.logger.log(\"Language file reloaded for \" + this.settings.language);\r\n            this.languageSubject.next(this.settings.language);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Save all the settings to ionic storage\r\n     */\r\n    private save() {\r\n        this.storage.set(this.SETTINGS_KEY, this.settings).then(\r\n            () => this.logger.log(\"Settings written: \" + JSON.stringify(this.settings))\r\n        ).catch(err => {\r\n            this.logger.error(\"Could not save setting file!\");\r\n            this.logger.error(err);\r\n        });\r\n    }\r\n\r\n    public getShortLangCode() {\r\n        return this.language.substring(0, this.language.indexOf('-'));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/settings/settings.ts","import { Injectable } from \"@angular/core\";\r\nimport { Platform } from \"ionic-angular\";\r\nimport { StoryInformation } from '../../datamodels/storyInformation';\r\nimport { DEFAULT_READER, SINGLE_STORY_FILE_NAME } from \"../../app/constants\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\nimport { ChapterAttributes, MtgaNextStoryNode, MtgaStoryNode, Story, StoryMetaData } from \"../../datamodels/story/story\";\r\nimport { Observable } from \"rxjs/Observable\";\r\nimport { SettingsProvider } from \"../settings/settings\";\r\nimport { Storage } from \"@ionic/storage\";\r\nimport { File } from \"@ionic-native/file\";\r\nimport { SaveGameProvider } from \"../savegame/savegame\";\r\nimport { PublicStoryHelperProvider } from \"../public-story-helper/public-story-helper\"\r\nimport { LoggerProvider } from \"../logger/logger\";\r\n\r\n@Injectable()\r\nexport class StoryProvider {  \r\n    private readonly STORY_INFO_KEY = 'STORY_INFO';\r\n    private storyIndices: Map<string, number> = new Map<string, number>();\r\n    private _stories: Array<StoryInformation> = new Array<StoryInformation>();\r\n    private story: Story = null;\r\n    private currentNode: MtgaStoryNode;\r\n\r\n    constructor(protected platform: Platform,\r\n        private logger: LoggerProvider,\r\n        private fileService : File,\r\n        private storage: Storage,\r\n        private http: HttpClient,\r\n        private settings: SettingsProvider,\r\n        private savegames: SaveGameProvider,\r\n        private publicStoryHelper : PublicStoryHelperProvider) {\r\n        this.platform.ready().then(() => {\r\n            this.storage.ready().then(() => {\r\n                this.storage.get(this.STORY_INFO_KEY).then((loadedStories) => {\r\n                    if (loadedStories) {\r\n                        this._stories = loadedStories;\r\n                        this.buildIndex();\r\n                    }\r\n                }).catch(error => {\r\n                    this.logger.error(error);\r\n                });\r\n            });\r\n        });\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Create an index map\r\n     * to map story.id to array index\r\n     */\r\n    private buildIndex(): void {\r\n        this.storyIndices.clear();\r\n        for (let i = 0; i < this._stories.length; i++){\r\n            let story = this._stories[i];\r\n            this.storyIndices.set(story.id, i);\r\n        }\r\n    }\r\n\r\n    public get stories() : Array<StoryInformation> {\r\n        return this._stories;\r\n    }\r\n\r\n    /**\r\n     * Add a new story to the storage and save\r\n     * @param story Story to add\r\n     */\r\n    public addStory(story: StoryInformation) {\r\n        let exists = this.storyIndices.get(story.id);\r\n        if (!exists) {\r\n            let index = this._stories.push(story) - 1;\r\n            this.storyIndices.set(story.id, index);\r\n            this.storage.set(this.STORY_INFO_KEY, this._stories);\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Returns the story information matching the id or null if it does not exist\r\n     * @param id id of the story to look for\r\n     */\r\n    public getStoryInformation(id: string): StoryInformation {\r\n        let index = this.storyIndices.get(id);\r\n        if (index != null) {\r\n            return this._stories[index];\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Checks if a story already exists\r\n     * @param storyId Story id\r\n     */\r\n    public exists(storyId: string) {\r\n        let index = this.storyIndices.get(storyId);\r\n        return (index != null);\r\n    }\r\n\r\n    /**\r\n     * Deletes a story from the database (does not cleanup files on SD)\r\n     * @param id id of the story to be removed\r\n     */\r\n    public deleteStory(id: string) {\r\n        let index = this.storyIndices.get(id);\r\n        if (index != null) {\r\n            this._stories.splice(index, 1);\r\n            this.buildIndex();\r\n            this.storage.set(this.STORY_INFO_KEY, this._stories);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Load one of the storys that are deployed within the APK\r\n     * @param story device story to load (one of the mock stories)\r\n     * @param shortLangCode language code (2 chars)\r\n     */\r\n    private loadDeviceStory(story: StoryInformation, shortLangCode: string) : Observable<boolean>{\r\n        let storyJson = 'assets/stories/' + story.id + '/' + shortLangCode + '/' + SINGLE_STORY_FILE_NAME;\r\n        return Observable.create(\r\n            (observer) => {\r\n                this.http.get(storyJson).subscribe(\r\n                    (s: Story) => {\r\n                        this.story = s;\r\n                        this.loadFirstNode();\r\n                        observer.next(true);\r\n                        observer.complete();\r\n                    }\r\n                )\r\n            }\r\n        )\r\n    }\r\n\r\n    /**\r\n     * Load one of the downloaded stories\r\n     * @param story cloud/public story to load from SD/Root directory\r\n     * @param shortLangCode language code (2 chars)\r\n     */\r\n    private loadPublicStory(story: StoryInformation, shortLangCode: string): Observable<boolean> {\r\n        let storyJsonBasePath = this.publicStoryHelper.getStoryJsonFolderPath(story, shortLangCode);\r\n        return Observable.create((observer) => {\r\n            this.fileService.readAsText(storyJsonBasePath, SINGLE_STORY_FILE_NAME).then((jsonText) => {\r\n                let story: Story = JSON.parse(jsonText);\r\n                this.story = story;\r\n                this.loadFirstNode();\r\n                observer.next(true);\r\n                observer.complete();\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Loads a story (cloud or device based)\r\n     * @param id id of the story to load\r\n     */\r\n    public loadStory(id: string): Observable<boolean> {\r\n        let lang = this.settings.getShortLangCode();\r\n        let story = this.getStoryInformation(id);\r\n        this.logger.log(\"StoryProvider-loadStory(): Loading:\" + JSON.stringify(story));\r\n        this.logger.log('Loading story <' + id + '> with language <' + lang + '>');\r\n        if (story.medium === 'cloud') {\r\n            return this.loadPublicStory(story, lang);\r\n        } else {\r\n            return this.loadDeviceStory(story,lang);\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public getStoryAttributes(): StoryMetaData {\r\n        if (this.story) {\r\n            return this.story[\"mtga-story\"].attributes;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    protected loadFirstNode(): void {\r\n        this.loadNode(0);\r\n    }\r\n\r\n    public loadNode(i: number) {\r\n        this.currentNode = this.story[\"mtga-story\"][\"mtga-story-node\"][i.toString()];\r\n    }\r\n\r\n    public loadNodeForAnswer(i: number): void {\r\n        // workaround TODO need to fix data\r\n        let id: number;\r\n        if (this.currentNode[\"mtga-nextStoryNode\"][i]) {\r\n            id = this.currentNode[\"mtga-nextStoryNode\"][i].attributes.Id - 1;\r\n        } else {\r\n            id = this.currentNode[\"mtga-nextStoryNode\"].attributes.Id - 1;\r\n        }\r\n        this.logger.log(\"Answer #\" + i + \" matched to the next node with the id: \" + id + \". Loading node \" + id);\r\n        this.loadNode(id);\r\n    }\r\n\r\n    public getAnswers(): MtgaNextStoryNode[] {\r\n        let result = [];\r\n\r\n        for (let item in this.currentNode[\"mtga-nextStoryNode\"]) {\r\n            // workaround, TODO need to fix data\r\n            if (Number.isNaN(+item)) {\r\n                result.push(this.currentNode[\"mtga-nextStoryNode\"]);\r\n                break;\r\n            } else {\r\n                result.push(this.currentNode[\"mtga-nextStoryNode\"][item]);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    public getText(): string {\r\n        return this.currentNode[\"mtga-nodeText\"].value;\r\n    }\r\n\r\n    public getChapterAtrributes(): ChapterAttributes {\r\n        return this.currentNode.attributes;\r\n    }\r\n\r\n    getCurrentAudioSrc(): string {\r\n        return this.currentNode.attributes.audioSrc;\r\n    }\r\n\r\n    public isCurrentSpeakerReadingAnswersOut(): boolean {\r\n        let storyId = this.getStoryAttributes().id;\r\n        let reader = this.savegames.loadSavegame(storyId).reader;\r\n        this.logger.log(\"Current speaker is \" + reader);\r\n\r\n        if (reader === DEFAULT_READER) {\r\n            return false;\r\n        } else {\r\n            for (let r of this.getStoryInformation(storyId).readers) {\r\n                if (r.name === reader) {\r\n                    this.logger.log(\"Found reader and returning \" + r.answersPartOfAudioFile);\r\n                    return r.answersPartOfAudioFile;\r\n                }\r\n            }\r\n        }\r\n\r\n        // if nothing was found assume the answers need to be read out\r\n        return false;\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/story/story.ts","import { Injectable } from '@angular/core';\r\nimport { ToastController } from 'ionic-angular/components/toast/toast-controller';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\n/*\r\n  Generated class for the SimpleToastProvider provider.\r\n\r\n  See https://angular.io/guide/dependency-injection for more info on providers\r\n  and Angular DI.\r\n*/\r\n@Injectable()\r\nexport class SimpleToastProvider {\r\n\r\n  constructor(private toastCtrl: ToastController, private translate : TranslateService) {\r\n  }\r\n\r\n  public displayToast(message: string, duration = 3000, displayOkBtn = false, dismissHandler : (() => void) = null) {\r\n    const toast = this.toastCtrl.create({\r\n      message: message,\r\n      showCloseButton: displayOkBtn,\r\n      duration: duration,\r\n      closeButtonText: this.translate.instant('COMMON_OK')\r\n    });\r\n    if (dismissHandler != null) {\r\n      toast.onDidDismiss(dismissHandler);\r\n    }\r\n    toast.present();\r\n}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/simple-toast/simple-toast.ts","/**\r\n * Created by Kevin on 26.06.2017.\r\n *\r\n * Accesses the predefined texts for TTS output\r\n */\r\n\r\nimport { Injectable } from \"@angular/core\";\r\nimport { Observable } from \"rxjs/Observable\";\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { PredefinedTexts } from \"../../datamodels/predefinedTexts\";\r\nimport { FILETYPE_JSON, TTS_RES } from \"../../app/constants\";\r\nimport { LoggerProvider } from \"../logger/logger\";\r\n\r\n@Injectable()\r\nexport class LanguageFileProvider {\r\n\r\n  private _preDefinedTexts: PredefinedTexts;\r\n\r\n  constructor(public http: HttpClient, private logger: LoggerProvider) {\r\n    this.logger.log(\"Language file service instantiated\");\r\n    this.loadLanguageFile().subscribe(() => this.logger.log(\"Language file subscription ok\"));\r\n  }\r\n\r\n  get preDefinedTexts(): PredefinedTexts {\r\n    return this._preDefinedTexts;\r\n  }\r\n\r\n  set preDefinedTexts(value: PredefinedTexts) {\r\n    this._preDefinedTexts = value;\r\n  }\r\n\r\n  public loadLanguageFile(language: string = 'de-DE') {\r\n    return Observable.create(\r\n      (observer) => {\r\n        this.http.get(TTS_RES + language + FILETYPE_JSON).subscribe(\r\n          (texts: PredefinedTexts) => {\r\n            this.logger.log(\"Loaded language file for <\" + language + \">\");\r\n            this.preDefinedTexts = texts;\r\n            this.logger.log(\"Loaded language file is:\");\r\n            this.logger.log(texts);\r\n            observer.next(true);\r\n            observer.complete();\r\n          }\r\n        );\r\n      }\r\n    );\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/speechRecognition/languageFile.ts","/**\r\n *\r\n * @author Matthias Kiefer\r\n * @date 2017-11-28\r\n *\r\n * \r\n * TODO The event variable in delete end select is a workaround.\r\n */\r\nimport { Component } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { NavController, ModalController } from 'ionic-angular';\r\n\r\nimport { TabsPage } from '../tabs/tabs';\r\nimport { CreateUserProfilePage } from '../createUserProfile/createUserProfile'\r\n\r\nimport { AuthProvider } from '../../providers/auth/auth';\r\nimport { SimpleToastProvider } from \"../../providers/simple-toast/simple-toast\";\r\n\r\n@Component({\r\n  selector: 'page-selectUserProfile',\r\n  templateUrl: 'selectUserProfile.html'\r\n})\r\n\r\nexport class SelectUserProfilePage {\r\n  isShowingOptions: boolean;\r\n  isShowingOptionsButton: boolean = false;\r\n  showingOptionsLabel: string;\r\n\r\n  constructor(private navCtrl: NavController,\r\n    private translate: TranslateService,\r\n    private authProvider: AuthProvider,\r\n    public modalCtrl: ModalController,\r\n    private toastProvider: SimpleToastProvider) {\r\n\r\n    this.isShowingOptions = false;\r\n    this.translate.get('COMMON_EDIT').subscribe(\r\n      value => { // value is our translated string\r\n        this.showingOptionsLabel = value;\r\n      }\r\n    );\r\n\r\n    const activeUserProfile = this.authProvider.getActiveUserProfile();\r\n    if (activeUserProfile && !activeUserProfile.child) {\r\n      this.isShowingOptionsButton = true;\r\n    }\r\n  }\r\n\r\n  public select(event, userProfileId: string) {\r\n    event.stopPropagation(); // TODO read desc in file header\r\n\r\n    this.authProvider.setActiveUserProfile(userProfileId).subscribe(success => {\r\n      if (success) {\r\n        // this.navCtrl.push(TabsPage);\r\n        this.navCtrl.setRoot(TabsPage);\r\n      }\r\n    }, error => {\r\n      console.log(\"SelectUserProfilePage-select(): \" + error.prototype.toString() + \":\" + JSON.stringify(error));\r\n    });\r\n  }\r\n\r\n  public delete(event, userProfileId: string) {\r\n    event.stopPropagation(); // TODO read desc in file header\r\n\r\n    console.log(\"delete: \" + userProfileId);\r\n    this.authProvider.deleteUserProfile(userProfileId);\r\n  }\r\n\r\n  public create() {\r\n    let userProfileModal = this.modalCtrl.create(CreateUserProfilePage);\r\n    userProfileModal.present();\r\n  }\r\n\r\n  public showOptions() {\r\n    if (!this.isShowingOptions) {\r\n\r\n      let alert = this.authProvider.presentPinPrompt(valid => {\r\n        if (valid) {\r\n          this.isShowingOptions = true;\r\n          this.showingOptionsLabel = this.translate.instant('COMMON_DONE');\r\n        } else {\r\n          this.toastProvider.displayToast(\"Wrong pin.\"); // TODO tobi i18\r\n          return false;\r\n        }\r\n      });\r\n\r\n      alert.present();\r\n\r\n    } else {\r\n      this.isShowingOptions = false;\r\n      this.showingOptionsLabel = this.translate.instant('COMMON_EDIT');;\r\n    }\r\n\r\n\r\n\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/selectUserProfile/selectUserProfile.ts","import { Injectable } from '@angular/core';\r\nimport { Savegame } from '../../datamodels/savegame';\r\nimport { Storage } from '@ionic/storage';\r\nimport { AuthProvider } from '../../providers/auth/auth';\r\n\r\n/*\r\n  Generated class for the SaveGameProvider provider.\r\n\r\n  See https://angular.io/guide/dependency-injection for more info on providers\r\n  and Angular DI.\r\n*/\r\n@Injectable()\r\nexport class SaveGameProvider {\r\n  private readonly SAVEGAME_KEY = \"SAVEGAMES\";\r\n  //Stores a Map, that maps profile ids to a story-id/savegame map\r\n  private savegames: Map<string, Map<string, Savegame>> = new Map();\r\n  constructor(private storage: Storage, private authProvider: AuthProvider) {\r\n    this.storage.ready().then((storage) => {\r\n      this.loadSavegames();\r\n    }).catch(error => {\r\n      console.error(\"Could not load savegames at all!\");\r\n    });\r\n  }\r\n\r\n  private loadSavegames() {\r\n    return this.storage.get(this.SAVEGAME_KEY).then((savegames) => {\r\n      if (savegames != null) {\r\n        this.savegames = savegames;\r\n      }\r\n    });\r\n  }\r\n\r\n  public loadSavegame(storyId: string): Savegame {\r\n    let emptySave = new Savegame();\r\n    emptySave.storyId = storyId;\r\n    emptySave.chosenPath = new Array<number>();\r\n    let userSaves = this.savegames.get(this.authProvider.getActiveUserProfile().id);\r\n    if (userSaves == null) {\r\n      return emptySave;\r\n    } else {\r\n      let savegame = userSaves.get(storyId);\r\n      //If no savegame for story found --> return an empty savegame\r\n      return savegame || emptySave;\r\n    }\r\n  }\r\n\r\n  public addSavegame(savegame: Savegame) {\r\n    let profileSaves = this.getProfileSaves();\r\n    profileSaves.set(savegame.storyId, savegame);\r\n    this.save();\r\n  }\r\n\r\n  private getProfileSaves(): Map<string, Savegame> {\r\n    let profileId = this.authProvider.getActiveUserProfile().id;\r\n    let profileSaves = this.savegames.get(profileId);\r\n    if (profileSaves == null) {\r\n      profileSaves = new Map<string, Savegame>();\r\n      this.savegames.set(profileId, profileSaves);\r\n    }\r\n    return profileSaves;\r\n  }\r\n\r\n  private save() {\r\n    this.storage.set(this.SAVEGAME_KEY, this.savegames).then((value) => {\r\n      console.log(\"SaveGameProvider: Saved savegames!\");\r\n    }, (reason) => {\r\n      console.error(\"SaveGameProvider: Could not save savegames. Error: \" + JSON.stringify(reason));\r\n    });\r\n  }\r\n\r\n  public updateSavegame(savegame: Savegame) {\r\n    let profileSaves = this.getProfileSaves();\r\n    profileSaves.set(savegame.storyId, savegame);\r\n    this.save();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/savegame/savegame.ts","import { Injectable } from '@angular/core';\r\nimport { Platform } from 'ionic-angular';\r\nimport { File } from '@ionic-native/file'\r\nimport { APP_NAME, READER_DIR, FILETYPE_MP4 } from '../../app/constants';\r\nimport { StoryInformationWithUrl, StoryInformation } from '../../datamodels/storyInformation'\r\nimport { SettingsProvider } from '../../providers/settings/settings'\r\n/**\r\n * Helper class to access file/folder paths of downloaded (public) stories\r\n * @Author Max Weiler\r\n */\r\n@Injectable()\r\nexport class PublicStoryHelperProvider {\r\n\r\n  private publicStoryBasePath: string;\r\n  constructor(private platform: Platform, private file: File, private settings : SettingsProvider) {\r\n    this.platform.ready().then((platform) => {\r\n      this.publicStoryBasePath = this.file.externalRootDirectory + APP_NAME + \"/\";\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Returns the path to the folder where the main story json in the specified language is located\r\n   * @param story the story information of the downloaded/public story\r\n   * @param lang preferred language\r\n   */\r\n  public getStoryJsonFolderPath(story: StoryInformation | StoryInformationWithUrl, lang: string) : string {\r\n    return this.publicStoryBasePath  + story.id + \"/\" + lang + \"/\";\r\n  }\r\n\r\n  /**\r\n   * Returns the absolute path to a specific audio asset of the story\r\n   * @param story the story information of the downloaded/public story\r\n   * @param audioFile Filename assigned to the current story node\r\n   * @param reader ID of the reader\r\n   */\r\n  public getAudioPathForStory(story: StoryInformation | StoryInformationWithUrl, audioFile: string, reader : string) : string {\r\n    let path = this.publicStoryBasePath + story.id + \"/\";\r\n    path = path + this.settings.getShortLangCode() + READER_DIR + reader + '/' + audioFile + FILETYPE_MP4;\r\n    return path;\r\n  }\r\n\r\n  /**\r\n   * Returns the absolute path to the story icon for external stories \r\n   * @param story External Story\r\n   */\r\n  public getThumbnailPathForStory(story: StoryInformation | StoryInformationWithUrl){\r\n    return this.publicStoryBasePath + story.id + \"/icon.png\";\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/public-story-helper/public-story-helper.ts"],"sourceRoot":""}